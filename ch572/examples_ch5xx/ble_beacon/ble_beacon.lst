
ble_beacon.elf:     file format elf32-littleriscv


Disassembly of section .init:

00000000 <InterruptVector>:
	void InterruptVector()         __attribute__((naked)) __attribute((section(".init"))) __attribute((weak,alias("InterruptVectorDefault"))) __attribute((naked));
	void InterruptVectorDefault()  __attribute__((naked)) __attribute((section(".init"))) __attribute((naked));
	void InterruptVectorDefault( void )
	{
		#if !defined(FUNCONF_TINYVECTOR) || !FUNCONF_TINYVECTOR
			asm volatile( DEFAULT_INTERRUPT_VECTOR_CONTENTS );
   0:	6ba0006f          	j	6ba <handle_reset>
   4:	0000                	unimp
   6:	0000                	unimp
   8:	073e                	slli	a4,a4,0xf
   a:	0000                	unimp
   c:	073e                	slli	a4,a4,0xf
   e:	0000                	unimp
  10:	bda9                	j	fffffe6a <_eusrstack+0xdfffce6a>
  12:	f3f9                	bnez	a5,ffffffd8 <_eusrstack+0xdfffcfd8>
  14:	073e                	slli	a4,a4,0xf
	...
  1e:	0000                	unimp
  20:	073e                	slli	a4,a4,0xf
  22:	0000                	unimp
  24:	073e                	slli	a4,a4,0xf
	...
  2e:	0000                	unimp
  30:	073e                	slli	a4,a4,0xf
  32:	0000                	unimp
  34:	0000                	unimp
  36:	0000                	unimp
  38:	073e                	slli	a4,a4,0xf
  3a:	0000                	unimp
  3c:	0000                	unimp
  3e:	0000                	unimp
  40:	073e                	slli	a4,a4,0xf
  42:	0000                	unimp
  44:	073e                	slli	a4,a4,0xf
  46:	0000                	unimp
  48:	073e                	slli	a4,a4,0xf
  4a:	0000                	unimp
  4c:	073e                	slli	a4,a4,0xf
  4e:	0000                	unimp
  50:	073e                	slli	a4,a4,0xf
  52:	0000                	unimp
  54:	0b3a                	slli	s6,s6,0xe
  56:	0000                	unimp
  58:	073e                	slli	a4,a4,0xf
  5a:	0000                	unimp
  5c:	0000                	unimp
  5e:	0000                	unimp
  60:	073e                	slli	a4,a4,0xf
  62:	0000                	unimp
  64:	073e                	slli	a4,a4,0xf
  66:	0000                	unimp
  68:	073e                	slli	a4,a4,0xf
  6a:	0000                	unimp
  6c:	073e                	slli	a4,a4,0xf
  6e:	0000                	unimp
  70:	0bc8                	addi	a0,sp,468
  72:	0000                	unimp
  74:	073e                	slli	a4,a4,0xf
  76:	0000                	unimp
  78:	073e                	slli	a4,a4,0xf
  7a:	0000                	unimp
  7c:	073e                	slli	a4,a4,0xf
  7e:	0000                	unimp
  80:	073e                	slli	a4,a4,0xf
  82:	0000                	unimp
  84:	073e                	slli	a4,a4,0xf
  86:	0000                	unimp
  88:	073e                	slli	a4,a4,0xf
  8a:	0000                	unimp
  8c:	073e                	slli	a4,a4,0xf
	...

Disassembly of section .text:

00000090 <RTCTrigger>:

//Set RTC to generate an interrupt after cyc ticks.
RV_STATIC_INLINE void RTCTrigger(uint32_t cyc) 
{
	//get the rtc current time
	uint32_t alarm = (uint32_t) R16_RTC_CNT_LSI | ( (uint32_t) R16_RTC_CNT_DIV1 << 16 );
  90:	400016b7          	lui	a3,0x40001
  94:	0386d783          	lhu	a5,56(a3) # 40001038 <_eusrstack+0x1fffe038>
  98:	01079713          	slli	a4,a5,0x10
  9c:	03a6d783          	lhu	a5,58(a3)
  a0:	8341                	srli	a4,a4,0x10
  a2:	07c2                	slli	a5,a5,0x10
  a4:	8fd9                	or	a5,a5,a4

	alarm += cyc;
  a6:	953e                	add	a0,a0,a5

	if( alarm > RTC_MAX_COUNT )
  a8:	a8c007b7          	lui	a5,0xa8c00
  ac:	00a7f563          	bgeu	a5,a0,b6 <RTCTrigger+0x26>
	{
		alarm -= RTC_MAX_COUNT;
  b0:	574007b7          	lui	a5,0x57400
  b4:	953e                	add	a0,a0,a5
	}

	SYS_SAFE_ACCESS
  b6:	400017b7          	lui	a5,0x40001
  ba:	05700713          	li	a4,87
  be:	04e78023          	sb	a4,64(a5) # 40001040 <_eusrstack+0x1fffe040>
  c2:	fa800713          	li	a4,-88
  c6:	04e78023          	sb	a4,64(a5)
  ca:	0001                	nop
  cc:	0001                	nop
  ce:	dbc8                	sw	a0,52(a5)
  d0:	04078023          	sb	zero,64(a5)
  d4:	0001                	nop
  d6:	0001                	nop
	(
		R32_RTC_TRIG = alarm;
	);
}
  d8:	8082                	ret

000000da <DevSetMode>:
	NVIC->VTFIDR[3] = 0x14;
}

void DevSetMode(uint16_t mode) {
#if !defined(CH571_CH573)
	if(mode) {
  da:	fffd07b7          	lui	a5,0xfffd0
		BB->CTRL_CFG = DEVSETMODE_ON;
  de:	4000c6b7          	lui	a3,0x4000c
  e2:	fff78713          	addi	a4,a5,-1 # fffcffff <_eusrstack+0xdffccfff>
  e6:	1006a783          	lw	a5,256(a3) # 4000c100 <_eusrstack+0x20009100>
  ea:	8ff9                	and	a5,a5,a4
	if(mode) {
  ec:	c11d                	beqz	a0,112 <DevSetMode+0x38>
		BB->CTRL_CFG = DEVSETMODE_ON;
  ee:	00020737          	lui	a4,0x20
  f2:	8fd9                	or	a5,a5,a4
  f4:	10f6a023          	sw	a5,256(a3)
		RF->RF2 |= 0x330000;
  f8:	4000d737          	lui	a4,0x4000d
  fc:	471c                	lw	a5,8(a4)
  fe:	003306b7          	lui	a3,0x330
 102:	8fd5                	or	a5,a5,a3
 104:	c71c                	sw	a5,8(a4)
	mode = (mode == 0) ? 0x80 : mode;
#elif !defined(CH32V208)
	mode |= 0x30000;
#endif
#endif // ! CH571_CH573
	LL->CTRL_MOD = mode;
 106:	4000c7b7          	lui	a5,0x4000c
 10a:	20078793          	addi	a5,a5,512 # 4000c200 <_eusrstack+0x20009200>
 10e:	cba8                	sw	a0,80(a5)
}
 110:	8082                	ret
		BB->CTRL_CFG = DEVSETMODE_OFF;
 112:	6741                	lui	a4,0x10
 114:	8fd9                	or	a5,a5,a4
 116:	10f6a023          	sw	a5,256(a3) # 330100 <ble_beacon.c.d6dc49b8+0x32ddad>
		RF->RF2 &= 0xffcdffff;
 11a:	4000d6b7          	lui	a3,0x4000d
 11e:	469c                	lw	a5,8(a3)
 120:	ffce0737          	lui	a4,0xffce0
 124:	177d                	addi	a4,a4,-1
 126:	8ff9                	and	a5,a5,a4
 128:	c69c                	sw	a5,8(a3)
 12a:	bff1                	j	106 <DevSetMode+0x2c>

0000012c <RFEND_TXCTune>:

uint32_t RFEND_TXCTune(uint8_t channel) {
	// 0xbf = 2401 MHz
	RF->RF1 &= 0xfffffffe;
 12c:	4000d737          	lui	a4,0x4000d
 130:	435c                	lw	a5,4(a4)
	RF->TXTUNE_CTRL = (RF->TXTUNE_CTRL & 0xfffe00ff) | (0xbf00 + (channel_map[channel] << 8));
 132:	6685                	lui	a3,0x1
 134:	c0468693          	addi	a3,a3,-1020 # c04 <channel_map>
	RF->RF1 &= 0xfffffffe;
 138:	9bf9                	andi	a5,a5,-2
	RF->TXTUNE_CTRL = (RF->TXTUNE_CTRL & 0xfffe00ff) | (0xbf00 + (channel_map[channel] << 8));
 13a:	96aa                	add	a3,a3,a0
	RF->RF1 &= 0xfffffffe;
 13c:	c35c                	sw	a5,4(a4)
	RF->TXTUNE_CTRL = (RF->TXTUNE_CTRL & 0xfffe00ff) | (0xbf00 + (channel_map[channel] << 8));
 13e:	0006c783          	lbu	a5,0(a3)
 142:	66b1                	lui	a3,0xc
 144:	5f10                	lw	a2,56(a4)
 146:	f0068693          	addi	a3,a3,-256 # bf00 <ble_beacon.c.d6dc49b8+0x9bad>
 14a:	07a2                	slli	a5,a5,0x8
 14c:	97b6                	add	a5,a5,a3
 14e:	7681                	lui	a3,0xfffe0
 150:	0ff68693          	addi	a3,a3,255 # fffe00ff <_eusrstack+0xdffdd0ff>
 154:	8e75                	and	a2,a2,a3
 156:	8fd1                	or	a5,a5,a2
 158:	df1c                	sw	a5,56(a4)
	RF->RF1 |= 1;
 15a:	435c                	lw	a5,4(a4)

	LL->TMR = 8000;
	while(!(RF->TXCTUNE_CO_CTRL & (1 << 25)) || !(RF->TXCTUNE_CO_CTRL & (1 << 26))) {
 15c:	02000637          	lui	a2,0x2000
 160:	040006b7          	lui	a3,0x4000
	RF->RF1 |= 1;
 164:	0017e793          	ori	a5,a5,1
 168:	c35c                	sw	a5,4(a4)
	LL->TMR = 8000;
 16a:	4000c7b7          	lui	a5,0x4000c
 16e:	6709                	lui	a4,0x2
 170:	f4070713          	addi	a4,a4,-192 # 1f40 <ch32fun.c.909004c7+0xb38>
 174:	20078793          	addi	a5,a5,512 # 4000c200 <_eusrstack+0x20009200>
 178:	d3f8                	sw	a4,100(a5)
		if(LL->TMR == 0) {
 17a:	4000c5b7          	lui	a1,0x4000c
	while(!(RF->TXCTUNE_CO_CTRL & (1 << 25)) || !(RF->TXCTUNE_CO_CTRL & (1 << 26))) {
 17e:	4000d737          	lui	a4,0x4000d
 182:	09072783          	lw	a5,144(a4) # 4000d090 <_eusrstack+0x2000a090>
 186:	8ff1                	and	a5,a5,a2
 188:	c789                	beqz	a5,192 <RFEND_TXCTune+0x66>
 18a:	09072783          	lw	a5,144(a4)
 18e:	8ff5                	and	a5,a5,a3
 190:	e789                	bnez	a5,19a <RFEND_TXCTune+0x6e>
		if(LL->TMR == 0) {
 192:	20058793          	addi	a5,a1,512 # 4000c200 <_eusrstack+0x20009200>
 196:	53fc                	lw	a5,100(a5)
 198:	f7ed                	bnez	a5,182 <RFEND_TXCTune+0x56>
			break;
		}
	}

	uint8_t nCO = (uint8_t)RF->TXCTUNE_CO_CTRL & 0x3f;
 19a:	4000d7b7          	lui	a5,0x4000d
 19e:	0907a503          	lw	a0,144(a5) # 4000d090 <_eusrstack+0x2000a090>
	uint8_t nGA = (uint8_t)(RF->TXCTUNE_GA_CTRL >> 10) & 0x7f;
 1a2:	0947a783          	lw	a5,148(a5)

	// printf("nCO,nGA ch:%u idx:%u %u,%u\n", channel, channel_map[channel], nCO,nGA);

	return (nGA << 24) | nCO;
 1a6:	03f57513          	andi	a0,a0,63
	uint8_t nGA = (uint8_t)(RF->TXCTUNE_GA_CTRL >> 10) & 0x7f;
 1aa:	83a9                	srli	a5,a5,0xa
	return (nGA << 24) | nCO;
 1ac:	07f7f793          	andi	a5,a5,127
 1b0:	07e2                	slli	a5,a5,0x18
}
 1b2:	8d5d                	or	a0,a0,a5
 1b4:	8082                	ret

000001b6 <RFCoreInit.constprop.0>:
	RFEND_TXTune();
	RFEND_RXTune();
	DevSetMode(0);
}

void RFCoreInit(uint8_t TxPower) {
 1b6:	7159                	addi	sp,sp,-112
	LL->LL5 = 0x8c;
 1b8:	4000c6b7          	lui	a3,0x4000c
void RFCoreInit(uint8_t TxPower) {
 1bc:	d686                	sw	ra,108(sp)
 1be:	d4a2                	sw	s0,104(sp)
 1c0:	d2a6                	sw	s1,100(sp)
 1c2:	d0ca                	sw	s2,96(sp)
 1c4:	cece                	sw	s3,92(sp)
 1c6:	ccd2                	sw	s4,88(sp)
 1c8:	cad6                	sw	s5,84(sp)
 1ca:	c8da                	sw	s6,80(sp)
 1cc:	c6de                	sw	s7,76(sp)
	LL->LL5 = 0x8c;
 1ce:	20068793          	addi	a5,a3,512 # 4000c200 <_eusrstack+0x20009200>
 1d2:	08c00713          	li	a4,140
 1d6:	cbd8                	sw	a4,20(a5)
	LL->LL7 = 0x76;
 1d8:	07600613          	li	a2,118
 1dc:	cfd0                	sw	a2,28(a5)
	LL->LL9 = 0x8c;
 1de:	d3d8                	sw	a4,36(a5)
	LL->LL13 = 0x8c;
 1e0:	dbd8                	sw	a4,52(a5)
	LL->LL17 = 0x8c;
 1e2:	c3f8                	sw	a4,68(a5)
	LL->LL19 = 0x76;
 1e4:	c7f0                	sw	a2,76(a5)
	LL->LL11 = 0x6c;
 1e6:	06c00713          	li	a4,108
 1ea:	d7d8                	sw	a4,44(a5)
	LL->LL15 = 0x6c;
 1ec:	dfd8                	sw	a4,60(a5)
	LL->LL1 = 0x78;
 1ee:	07800713          	li	a4,120
 1f2:	c3d8                	sw	a4,4(a5)
	LL->INT_EN = 0x16000f;
 1f4:	00160737          	lui	a4,0x160
	LL->LL21 = 0;
 1f8:	0407aa23          	sw	zero,84(a5)
	LL->INT_EN = 0x16000f;
 1fc:	073d                	addi	a4,a4,15
 1fe:	c7d8                	sw	a4,12(a5)
	LL->STATE_BUF = (uint32_t)LLE_BUF;
 200:	c2c18713          	addi	a4,gp,-980 # 20000028 <LLE_BUF>
 204:	dff8                	sw	a4,124(a5)
	LL->STATUS = 0xffffffff;
 206:	577d                	li	a4,-1
	RF->RF10 = 0x480;
 208:	4000d437          	lui	s0,0x4000d
	LL->STATUS = 0xffffffff;
 20c:	c798                	sw	a4,8(a5)
	RF->RF10 = 0x480;
 20e:	48000793          	li	a5,1152
 212:	d41c                	sw	a5,40(s0)
	RF->RF12 &= 0xfff9ffff;
 214:	581c                	lw	a5,48(s0)
 216:	fffa0737          	lui	a4,0xfffa0
 21a:	177d                	addi	a4,a4,-1
 21c:	8ff9                	and	a5,a5,a4
 21e:	d81c                	sw	a5,48(s0)
	RF->RF12 |= 0x70000000;
 220:	581c                	lw	a5,48(s0)
 222:	70000737          	lui	a4,0x70000
	RF->RF15 = (RF->RF15 & 0xf8ffffff) | 0x2000000;
 226:	02000637          	lui	a2,0x2000
	RF->RF12 |= 0x70000000;
 22a:	8fd9                	or	a5,a5,a4
 22c:	d81c                	sw	a5,48(s0)
	RF->RF15 = (RF->RF15 & 0xf8ffffff) | 0x2000000;
 22e:	5c58                	lw	a4,60(s0)
 230:	f90007b7          	lui	a5,0xf9000
 234:	17fd                	addi	a5,a5,-1
 236:	8f7d                	and	a4,a4,a5
 238:	8f51                	or	a4,a4,a2
 23a:	dc58                	sw	a4,60(s0)
	RF->RF15 = (RF->RF15 & 0x1fffffff) | 0x40000000;
 23c:	5c5c                	lw	a5,60(s0)
 23e:	40000737          	lui	a4,0x40000
	BB->BB14 = 0x2020c;
 242:	000204b7          	lui	s1,0x20
	RF->RF15 = (RF->RF15 & 0x1fffffff) | 0x40000000;
 246:	078e                	slli	a5,a5,0x3
 248:	838d                	srli	a5,a5,0x3
 24a:	8fd9                	or	a5,a5,a4
 24c:	dc5c                	sw	a5,60(s0)
	RF->RF18 &= 0xfff8ffff;
 24e:	443c                	lw	a5,72(s0)
 250:	fff90737          	lui	a4,0xfff90
 254:	177d                	addi	a4,a4,-1
 256:	8ff9                	and	a5,a5,a4
 258:	c43c                	sw	a5,72(s0)
	RF->RF20 = (RF->RF20 & 0xfffff8ff) | 0x300;
 25a:	4838                	lw	a4,80(s0)
	BB->CTRL_TX = (BB->CTRL_TX & 0x1ffffff) | (TxPower | 0x40) << 0x19;
 25c:	167d                	addi	a2,a2,-1
	NVIC->VTFIDR[3] = 0x14;
 25e:	49d1                	li	s3,20
	RF->RF20 = (RF->RF20 & 0xfffff8ff) | 0x300;
 260:	8ff77713          	andi	a4,a4,-1793
 264:	30076713          	ori	a4,a4,768
 268:	c838                	sw	a4,80(s0)
	RF->RF23 |= 0x70000;
 26a:	4c7c                	lw	a5,92(s0)
 26c:	00070737          	lui	a4,0x70
	DevSetMode(DEVSETMODE_TUNE);
 270:	55800513          	li	a0,1368
	RF->RF23 |= 0x70000;
 274:	8fd9                	or	a5,a5,a4
 276:	cc7c                	sw	a5,92(s0)
	RF->RF23 |= 0x700000;
 278:	4c7c                	lw	a5,92(s0)
 27a:	00700737          	lui	a4,0x700
 27e:	8fd9                	or	a5,a5,a4
 280:	cc7c                	sw	a5,92(s0)
	BB->BB14 = 0x2020c;
 282:	10068713          	addi	a4,a3,256
 286:	20c48793          	addi	a5,s1,524 # 2020c <ble_beacon.c.d6dc49b8+0x1deb9>
 28a:	df1c                	sw	a5,56(a4)
	BB->BB15 = 0x50;
 28c:	05000793          	li	a5,80
 290:	df5c                	sw	a5,60(a4)
	BB->CTRL_TX = (BB->CTRL_TX & 0x1ffffff) | (TxPower | 0x40) << 0x19;
 292:	5b5c                	lw	a5,52(a4)
 294:	8ff1                	and	a5,a5,a2
 296:	a4000637          	lui	a2,0xa4000
 29a:	8fd1                	or	a5,a5,a2
 29c:	db5c                	sw	a5,52(a4)
	BB->CTRL_CFG &= 0xfffffcff;
 29e:	1006a703          	lw	a4,256(a3)
	NVIC->VTFIDR[3] = 0x14;
 2a2:	e000e7b7          	lui	a5,0xe000e
	BB->CTRL_CFG &= 0xfffffcff;
 2a6:	cff77713          	andi	a4,a4,-769
 2aa:	10e6a023          	sw	a4,256(a3)
	NVIC->VTFIDR[3] = 0x14;
 2ae:	053789a3          	sb	s3,83(a5) # e000e053 <_eusrstack+0xc000b053>
	DevSetMode(DEVSETMODE_TUNE);
 2b2:	3525                	jal	da <DevSetMode>
	RF->RF1 &= 0xfffffeff;
 2b4:	4058                	lw	a4,4(s0)
	RF->RF10 &= 0xffffefff;
 2b6:	76fd                	lui	a3,0xfffff
 2b8:	16fd                	addi	a3,a3,-1
	RF->RF1 &= 0xfffffeff;
 2ba:	eff77713          	andi	a4,a4,-257
 2be:	c058                	sw	a4,4(s0)
	RF->RF10 &= 0xffffefff;
 2c0:	5418                	lw	a4,40(s0)
	uint32_t tune2401 = RFEND_TXCTune(37);
 2c2:	02500513          	li	a0,37
	RF->RF10 &= 0xffffefff;
 2c6:	8f75                	and	a4,a4,a3
 2c8:	d418                	sw	a4,40(s0)
	RF->RF11 &= 0xffffffef;
 2ca:	5458                	lw	a4,44(s0)
 2cc:	9b3d                	andi	a4,a4,-17
 2ce:	d458                	sw	a4,44(s0)
	RF->RF2 |= 0x20000;
 2d0:	441c                	lw	a5,8(s0)
 2d2:	8fc5                	or	a5,a5,s1
 2d4:	c41c                	sw	a5,8(s0)
	RF->RF1 |= 0x10;
 2d6:	405c                	lw	a5,4(s0)
 2d8:	0107e793          	ori	a5,a5,16
 2dc:	c05c                	sw	a5,4(s0)
	uint32_t tune2401 = RFEND_TXCTune(37);
 2de:	35b9                	jal	12c <RFEND_TXCTune>
	uint8_t nGA2401 = (uint8_t)(tune2401 >> 24) & 0x7f;
 2e0:	01855713          	srli	a4,a0,0x18
	uint32_t tune2401 = RFEND_TXCTune(37);
 2e4:	842a                	mv	s0,a0
	uint32_t tune2480 = RFEND_TXCTune(39);
 2e6:	02700513          	li	a0,39
	uint8_t nGA2401 = (uint8_t)(tune2401 >> 24) & 0x7f;
 2ea:	07f77b13          	andi	s6,a4,127
	uint32_t tune2480 = RFEND_TXCTune(39);
 2ee:	3d3d                	jal	12c <RFEND_TXCTune>
	uint8_t nGA2480 = (uint8_t)(tune2480 >> 24) & 0x7f;
 2f0:	01855913          	srli	s2,a0,0x18
	uint32_t tune2480 = RFEND_TXCTune(39);
 2f4:	8a2a                	mv	s4,a0
	uint32_t tune2440 = RFEND_TXCTune(18);
 2f6:	4549                	li	a0,18
 2f8:	3d15                	jal	12c <RFEND_TXCTune>
	uint8_t nCO2440 = (uint8_t)(tune2440 & 0x3f);
 2fa:	03f57a93          	andi	s5,a0,63
	uint8_t txctune_co[sizeof(RF->TXCTUNE_CO)] = {0};
 2fe:	02400613          	li	a2,36
 302:	4581                	li	a1,0
	uint8_t nGA2480 = (uint8_t)(tune2480 >> 24) & 0x7f;
 304:	07f97b93          	andi	s7,s2,127
	uint32_t tune2440 = RFEND_TXCTune(18);
 308:	84aa                	mv	s1,a0
	uint8_t nGA2440 = (uint8_t)(tune2440 >> 24) & 0x7f;
 30a:	01855913          	srli	s2,a0,0x18
	uint32_t dCO0140 = nCO2401 - nCO2440;
 30e:	03f47413          	andi	s0,s0,63
	uint8_t txctune_co[sizeof(RF->TXCTUNE_CO)] = {0};
 312:	0868                	addi	a0,sp,28
	uint32_t dCO0140 = nCO2401 - nCO2440;
 314:	41540433          	sub	s0,s0,s5
	uint8_t txctune_co[sizeof(RF->TXCTUNE_CO)] = {0};
 318:	cc02                	sw	zero,24(sp)
 31a:	2925                	jal	752 <memset>
 31c:	03340733          	mul	a4,s0,s3
	uint32_t dCO4080 = nCO2440 - nCO2480;
 320:	03fa7a13          	andi	s4,s4,63
		txctune_co[f] = tune | (tune << 4);
 324:	6605                	lui	a2,0x1
	uint8_t nGA2440 = (uint8_t)(tune2440 >> 24) & 0x7f;
 326:	07f97913          	andi	s2,s2,127
	uint32_t dCO4080 = nCO2440 - nCO2480;
 32a:	414a8a33          	sub	s4,s5,s4
	for(int f = 0; f < int_points; f++) {
 32e:	4781                	li	a5,0
		tune = (dCO0140 * (int_points -f)) / int_points;
 330:	45d1                	li	a1,20
		txctune_co[f] = tune | (tune << 4);
 332:	1641                	addi	a2,a2,-16
 334:	0834                	addi	a3,sp,24
 336:	00f68833          	add	a6,a3,a5
		tune = (dCO0140 * (int_points -f)) / int_points;
 33a:	02b75533          	divu	a0,a4,a1
	for(int f = 0; f < int_points; f++) {
 33e:	0785                	addi	a5,a5,1
 340:	8f01                	sub	a4,a4,s0
		txctune_co[f] = tune | (tune << 4);
 342:	00451693          	slli	a3,a0,0x4
 346:	8ef1                	and	a3,a3,a2
 348:	8ec9                	or	a3,a3,a0
 34a:	00d80023          	sb	a3,0(a6)
	for(int f = 0; f < int_points; f++) {
 34e:	feb793e3          	bne	a5,a1,334 <RFCoreInit.constprop.0+0x17e>
		txctune_co[f] = tune | (tune << 4);
 352:	6605                	lui	a2,0x1
	for(int f = 0; f < int_points; f++) {
 354:	4681                	li	a3,0
		tune = (dCO4080 * (f -int_points)) / int_points;
 356:	48d1                	li	a7,20
		txctune_co[f] = tune | (tune << 4);
 358:	1641                	addi	a2,a2,-16
	for(int f = int_points; f < sizeof(RF->TXCTUNE_CO); f++) {
 35a:	02800513          	li	a0,40
		tune = (dCO4080 * (f -int_points)) / int_points;
 35e:	0316d5b3          	divu	a1,a3,a7
		txctune_co[f] = tune | (tune << 4);
 362:	0838                	addi	a4,sp,24
 364:	00f70833          	add	a6,a4,a5
	for(int f = int_points; f < sizeof(RF->TXCTUNE_CO); f++) {
 368:	0785                	addi	a5,a5,1
 36a:	96d2                	add	a3,a3,s4
		txctune_co[f] = tune | (tune << 4);
 36c:	00459713          	slli	a4,a1,0x4
 370:	8f71                	and	a4,a4,a2
 372:	8f4d                	or	a4,a4,a1
 374:	00e80023          	sb	a4,0(a6)
	for(int f = int_points; f < sizeof(RF->TXCTUNE_CO); f++) {
 378:	fea793e3          	bne	a5,a0,35e <RFCoreInit.constprop.0+0x1a8>
 37c:	083c                	addi	a5,sp,24
	for(int i = 0; i < sizeof(txctune_co) /4; i++) {
 37e:	4681                	li	a3,0
		RF->TXCTUNE_CO[i] = ((uint32_t*)txctune_co)[i];
 380:	4000d537          	lui	a0,0x4000d
	for(int i = 0; i < sizeof(txctune_co) /4; i++) {
 384:	4629                	li	a2,10
		RF->TXCTUNE_CO[i] = ((uint32_t*)txctune_co)[i];
 386:	438c                	lw	a1,0(a5)
 388:	02868713          	addi	a4,a3,40 # fffff028 <_eusrstack+0xdfffc028>
 38c:	070a                	slli	a4,a4,0x2
 38e:	972a                	add	a4,a4,a0
 390:	c30c                	sw	a1,0(a4)
	for(int i = 0; i < sizeof(txctune_co) /4; i++) {
 392:	0685                	addi	a3,a3,1
 394:	0791                	addi	a5,a5,4
 396:	fec698e3          	bne	a3,a2,386 <RFCoreInit.constprop.0+0x1d0>
	uint32_t dGA0140 = nGA2401 - nGA2440;
 39a:	412b0733          	sub	a4,s6,s2
 39e:	4695                	li	a3,5
 3a0:	02d706b3          	mul	a3,a4,a3
		txctune_ga[f] = tune | (tune << 4);
 3a4:	6585                	lui	a1,0x1
	uint32_t dGA4080 = nGA2440 - nGA2480;
 3a6:	41790933          	sub	s2,s2,s7
	uint8_t txctune_ga[sizeof(RF->TXCTUNE_GA)] = {0};
 3aa:	c602                	sw	zero,12(sp)
 3ac:	c802                	sw	zero,16(sp)
 3ae:	ca02                	sw	zero,20(sp)
	for(int f = 1; f < int_points; f++) {
 3b0:	4785                	li	a5,1
		tune = (dGA0140 * (int_points -f)) / int_points;
 3b2:	4519                	li	a0,6
		txctune_ga[f] = tune | (tune << 4);
 3b4:	15c1                	addi	a1,a1,-16
 3b6:	0070                	addi	a2,sp,12
		tune = (dGA0140 * (int_points -f)) / int_points;
 3b8:	02a6d833          	divu	a6,a3,a0
		txctune_ga[f] = tune | (tune << 4);
 3bc:	00f608b3          	add	a7,a2,a5
	for(int f = 1; f < int_points; f++) {
 3c0:	0785                	addi	a5,a5,1
 3c2:	8e99                	sub	a3,a3,a4
		txctune_ga[f] = tune | (tune << 4);
 3c4:	00481613          	slli	a2,a6,0x4
 3c8:	8e6d                	and	a2,a2,a1
 3ca:	01066633          	or	a2,a2,a6
 3ce:	00c88023          	sb	a2,0(a7)
	for(int f = 1; f < int_points; f++) {
 3d2:	fea792e3          	bne	a5,a0,3b6 <RFCoreInit.constprop.0+0x200>
		txctune_ga[f] = tune | (tune << 4);
 3d6:	6605                	lui	a2,0x1
	for(int f = 1; f < int_points; f++) {
 3d8:	4701                	li	a4,0
		tune = (dGA4080 * (f -int_points)) / int_points;
 3da:	4319                	li	t1,6
		txctune_ga[f] = tune | (tune << 4);
 3dc:	ff060893          	addi	a7,a2,-16 # ff0 <_data_lma+0x3c4>
	for(int f = int_points; f < sizeof(RF->TXCTUNE_GA) -1; f++) {
 3e0:	452d                	li	a0,11
		tune = (dGA4080 * (f -int_points)) / int_points;
 3e2:	026755b3          	divu	a1,a4,t1
		txctune_ga[f] = tune | (tune << 4);
 3e6:	0074                	addi	a3,sp,12
 3e8:	00f68833          	add	a6,a3,a5
	for(int f = int_points; f < sizeof(RF->TXCTUNE_GA) -1; f++) {
 3ec:	0785                	addi	a5,a5,1
 3ee:	974a                	add	a4,a4,s2
		txctune_ga[f] = tune | (tune << 4);
 3f0:	00459693          	slli	a3,a1,0x4
 3f4:	0116f6b3          	and	a3,a3,a7
 3f8:	8ecd                	or	a3,a3,a1
 3fa:	00d80023          	sb	a3,0(a6)
	for(int f = int_points; f < sizeof(RF->TXCTUNE_GA) -1; f++) {
 3fe:	fea792e3          	bne	a5,a0,3e2 <RFCoreInit.constprop.0+0x22c>
		RF->TXCTUNE_GA[i] = ((uint32_t*)txctune_ga)[i];
 402:	46b2                	lw	a3,12(sp)
 404:	4000d7b7          	lui	a5,0x4000d
 408:	08078713          	addi	a4,a5,128 # 4000d080 <_eusrstack+0x2000a080>
 40c:	c734                	sw	a3,72(a4)
 40e:	46c2                	lw	a3,16(sp)
	RF->TXTUNE_CTRL = (RF->TXTUNE_CTRL & 0x80ffffff) | (tune2440 & 0x7f000000);
 410:	7f000537          	lui	a0,0x7f000
 414:	8ce9                	and	s1,s1,a0
		RF->TXCTUNE_GA[i] = ((uint32_t*)txctune_ga)[i];
 416:	c774                	sw	a3,76(a4)
 418:	46d2                	lw	a3,20(sp)
 41a:	cb34                	sw	a3,80(a4)
	RF->RF1 &= 0xffffffef;
 41c:	43d8                	lw	a4,4(a5)
	RF->TXTUNE_CTRL = (RF->TXTUNE_CTRL & 0x80ffffff) | (tune2440 & 0x7f000000);
 41e:	810006b7          	lui	a3,0x81000
 422:	16fd                	addi	a3,a3,-1
	RF->RF1 &= 0xffffffef;
 424:	9b3d                	andi	a4,a4,-17
 426:	c3d8                	sw	a4,4(a5)
	RF->RF1 &= 0xfffffffe;
 428:	43d8                	lw	a4,4(a5)
 42a:	9b79                	andi	a4,a4,-2
 42c:	c3d8                	sw	a4,4(a5)
	RF->RF10 |= 0x1000;
 42e:	5798                	lw	a4,40(a5)
 430:	8f51                	or	a4,a4,a2
 432:	d798                	sw	a4,40(a5)
	RF->RF11 |= 0x10;
 434:	57d8                	lw	a4,44(a5)
 436:	01076713          	ori	a4,a4,16
 43a:	d7d8                	sw	a4,44(a5)
	RF->TXTUNE_CTRL = (RF->TXTUNE_CTRL & 0xffffffc0) | (tune2440 & 0x3f);
 43c:	5f98                	lw	a4,56(a5)
 43e:	fc077713          	andi	a4,a4,-64
 442:	01576733          	or	a4,a4,s5
 446:	df98                	sw	a4,56(a5)
	RF->TXTUNE_CTRL = (RF->TXTUNE_CTRL & 0x80ffffff) | (tune2440 & 0x7f000000);
 448:	5f98                	lw	a4,56(a5)
 44a:	8f75                	and	a4,a4,a3
 44c:	8cd9                	or	s1,s1,a4
 44e:	df84                	sw	s1,56(a5)
	RF->RF1 |= 0x100;
 450:	43d8                	lw	a4,4(a5)
	RF->RF20 &= 0xfffeffff;
 452:	76c1                	lui	a3,0xffff0
 454:	16fd                	addi	a3,a3,-1
	RF->RF1 |= 0x100;
 456:	10076713          	ori	a4,a4,256
 45a:	c3d8                	sw	a4,4(a5)
	RF->RF20 &= 0xfffeffff;
 45c:	4bb8                	lw	a4,80(a5)
 45e:	8f75                	and	a4,a4,a3
 460:	cbb8                	sw	a4,80(a5)
	RF->RF2 |= 0x200000;
 462:	4798                	lw	a4,8(a5)
 464:	002006b7          	lui	a3,0x200
 468:	8f55                	or	a4,a4,a3
 46a:	c798                	sw	a4,8(a5)
	RF->RF3 = (RF->RF3 & 0xffffffef) | 0x10;
 46c:	47d8                	lw	a4,12(a5)
	while(LL->TMR && ((RF->RXTUNE >> 8) & 1));
 46e:	4000c6b7          	lui	a3,0x4000c
	RF->RF3 = (RF->RF3 & 0xffffffef) | 0x10;
 472:	01076713          	ori	a4,a4,16
 476:	c7d8                	sw	a4,12(a5)
	RF->RF1 |= 0x1000;
 478:	43d8                	lw	a4,4(a5)
 47a:	8f51                	or	a4,a4,a2
 47c:	c3d8                	sw	a4,4(a5)
	LL->TMR = 100;
 47e:	4000c7b7          	lui	a5,0x4000c
 482:	06400713          	li	a4,100
 486:	20078793          	addi	a5,a5,512 # 4000c200 <_eusrstack+0x20009200>
 48a:	d3f8                	sw	a4,100(a5)
	while(LL->TMR && ((RF->RXTUNE >> 8) & 1));
 48c:	4000d737          	lui	a4,0x4000d
 490:	20068793          	addi	a5,a3,512 # 4000c200 <_eusrstack+0x20009200>
 494:	53fc                	lw	a5,100(a5)
 496:	c791                	beqz	a5,4a2 <RFCoreInit.constprop.0+0x2ec>
 498:	09c72783          	lw	a5,156(a4) # 4000d09c <_eusrstack+0x2000a09c>
 49c:	1007f793          	andi	a5,a5,256
 4a0:	fbe5                	bnez	a5,490 <RFCoreInit.constprop.0+0x2da>
	tuneFilter = RF->RXTUNE & 0x1f;
 4a2:	4000d7b7          	lui	a5,0x4000d
 4a6:	08078713          	addi	a4,a5,128 # 4000d080 <_eusrstack+0x2000a080>
 4aa:	4f54                	lw	a3,28(a4)
 4ac:	c2418713          	addi	a4,gp,-988 # 20000020 <tuneFilter>
 4b0:	8afd                	andi	a3,a3,31
 4b2:	c314                	sw	a3,0(a4)
	RF->RF20 |= 0x10000;
 4b4:	4bb4                	lw	a3,80(a5)
 4b6:	6641                	lui	a2,0x10
 4b8:	8ed1                	or	a3,a3,a2
 4ba:	cbb4                	sw	a3,80(a5)
	RF->RF20 = (RF->RF20 & 0xffffffe0) | tuneFilter;
 4bc:	4bb4                	lw	a3,80(a5)
 4be:	4310                	lw	a2,0(a4)
 4c0:	9a81                	andi	a3,a3,-32
 4c2:	8ed1                	or	a3,a3,a2
 4c4:	cbb4                	sw	a3,80(a5)
	RF->RF2 &= 0xffdfffff;
 4c6:	4794                	lw	a3,8(a5)
 4c8:	ffe00637          	lui	a2,0xffe00
 4cc:	167d                	addi	a2,a2,-1
 4ce:	8ef1                	and	a3,a3,a2
 4d0:	c794                	sw	a3,8(a5)
	tuneFilter2M = (tuneFilter +2 < 0x1f) ? (tuneFilter +2) : 0x1f;
 4d2:	4314                	lw	a3,0(a4)
 4d4:	4679                	li	a2,30
 4d6:	47fd                	li	a5,31
 4d8:	0689                	addi	a3,a3,2
 4da:	00d66463          	bltu	a2,a3,4e2 <RFCoreInit.constprop.0+0x32c>
 4de:	431c                	lw	a5,0(a4)
 4e0:	0789                	addi	a5,a5,2
 4e2:	c2f1a423          	sw	a5,-984(gp) # 20000024 <tuneFilter2M>
	RF->RF22 &= 0xfffeffff;
 4e6:	4000d7b7          	lui	a5,0x4000d
 4ea:	4fb8                	lw	a4,88(a5)
 4ec:	76c1                	lui	a3,0xffff0
 4ee:	16fd                	addi	a3,a3,-1
 4f0:	8f75                	and	a4,a4,a3
 4f2:	cfb8                	sw	a4,88(a5)
	RF->RF2 |= 0x10000;
 4f4:	4798                	lw	a4,8(a5)
 4f6:	66c1                	lui	a3,0x10
	DevSetMode(0);
 4f8:	4501                	li	a0,0
	RF->RF2 |= 0x10000;
 4fa:	8f55                	or	a4,a4,a3
 4fc:	c798                	sw	a4,8(a5)
	RF->RF3 = (RF->RF3 & 0xfffffeff) | 0x100;
 4fe:	47d8                	lw	a4,12(a5)
	RF->RF1 = (RF->RF1 & 0xfffeffff) | 0x100000;
 500:	ffef06b7          	lui	a3,0xffef0
 504:	16fd                	addi	a3,a3,-1
	RF->RF3 = (RF->RF3 & 0xfffffeff) | 0x100;
 506:	10076713          	ori	a4,a4,256
 50a:	c7d8                	sw	a4,12(a5)
	RF->RF1 = (RF->RF1 & 0xfffeffff) | 0x100000;
 50c:	43d8                	lw	a4,4(a5)
 50e:	8f75                	and	a4,a4,a3
 510:	001006b7          	lui	a3,0x100
 514:	8f55                	or	a4,a4,a3
 516:	c3d8                	sw	a4,4(a5)
	DevSetMode(0);
 518:	36c9                	jal	da <DevSetMode>
	NVIC->IENR[0] = 0x1000;
	NVIC->IRER[0] = 0x1000;
#endif
	DevInit(TxPower);
	RegInit();
	NVIC->IPRIOR[0x15] |= 0x80;
 51a:	e000e737          	lui	a4,0xe000e
 51e:	41574783          	lbu	a5,1045(a4) # e000e415 <_eusrstack+0xc000b415>
 522:	f807e793          	ori	a5,a5,-128
 526:	0ff7f793          	andi	a5,a5,255
 52a:	40f70aa3          	sb	a5,1045(a4)
	NVIC_EnableIRQ(LLE_IRQn);
}
 52e:	50b6                	lw	ra,108(sp)
 530:	5426                	lw	s0,104(sp)
}

// Enable Interrupt (by interrupt number)
RV_STATIC_INLINE void NVIC_EnableIRQ(IRQn_Type IRQn)
{
	NVIC->IENR[((uint32_t)(IRQn) >> 5)] = (1 << ((uint32_t)(IRQn) & 0x1F));
 532:	002007b7          	lui	a5,0x200
 536:	10f72023          	sw	a5,256(a4)
 53a:	5496                	lw	s1,100(sp)
 53c:	5906                	lw	s2,96(sp)
 53e:	49f6                	lw	s3,92(sp)
 540:	4a66                	lw	s4,88(sp)
 542:	4ad6                	lw	s5,84(sp)
 544:	4b46                	lw	s6,80(sp)
 546:	4bb6                	lw	s7,76(sp)
 548:	6165                	addi	sp,sp,112
 54a:	8082                	ret

0000054c <LowPowerIdle.constprop.0>:

// enter idle state
RV_STATIC_INLINE void LowPowerIdle(uint32_t cyc)
 54c:	1141                	addi	sp,sp,-16
{
	RTCTrigger(cyc);
 54e:	42000513          	li	a0,1056
RV_STATIC_INLINE void LowPowerIdle(uint32_t cyc)
 552:	c606                	sw	ra,12(sp)
	RTCTrigger(cyc);
 554:	3e35                	jal	90 <RTCTrigger>

	NVIC->SCTLR &= ~(1 << 2); // don't deep sleep
 556:	e000f7b7          	lui	a5,0xe000f
 55a:	d0078793          	addi	a5,a5,-768 # e000ed00 <_eusrstack+0xc000bd00>
 55e:	4b98                	lw	a4,16(a5)
 560:	9b6d                	andi	a4,a4,-5
 562:	cb98                	sw	a4,16(a5)
	NVIC->SCTLR &= ~(1 << 3); // wfi
 564:	4b98                	lw	a4,16(a5)
 566:	9b5d                	andi	a4,a4,-9
 568:	cb98                	sw	a4,16(a5)
	asm volatile ("wfi\nnop\nnop" );
 56a:	10500073          	wfi
 56e:	0001                	nop
 570:	0001                	nop
}
 572:	40b2                	lw	ra,12(sp)
 574:	0141                	addi	sp,sp,16
 576:	8082                	ret

00000578 <blink>:
	R32_PB_PD_DRV = 0; //Disable pull-down
	R32_PB_PU = P_All; //Enable pull-up
#endif
}

void blink(int n) {
 578:	1141                	addi	sp,sp,-16
 57a:	c422                	sw	s0,8(sp)
 57c:	c226                	sw	s1,4(sp)
 57e:	c04a                	sw	s2,0(sp)
 580:	c606                	sw	ra,12(sp)
	for(int i = n-1; i >= 0; i--) {
 582:	fff50413          	addi	s0,a0,-1 # 7effffff <_eusrstack+0x5effcfff>
		funDigitalWrite( LED, FUN_LOW ); // Turn on LED
 586:	400014b7          	lui	s1,0x40001
	for(int i = n-1; i >= 0; i--) {
 58a:	597d                	li	s2,-1
		funDigitalWrite( LED, FUN_LOW ); // Turn on LED
 58c:	0ac4a783          	lw	a5,172(s1) # 400010ac <_eusrstack+0x1fffe0ac>
 590:	2007e793          	ori	a5,a5,512
 594:	0af4a623          	sw	a5,172(s1)
		LowPowerIdle( MS_TO_RTC(33) );
 598:	3f55                	jal	54c <LowPowerIdle.constprop.0>
		funDigitalWrite( LED, FUN_HIGH ); // Turn off LED
 59a:	0a84a783          	lw	a5,168(s1)
 59e:	2007e793          	ori	a5,a5,512
 5a2:	0af4a423          	sw	a5,168(s1)
		if(i) LowPowerIdle( MS_TO_RTC(33) );
 5a6:	c011                	beqz	s0,5aa <blink+0x32>
 5a8:	3755                	jal	54c <LowPowerIdle.constprop.0>
	for(int i = n-1; i >= 0; i--) {
 5aa:	147d                	addi	s0,s0,-1
 5ac:	ff2410e3          	bne	s0,s2,58c <blink+0x14>
	}
}
 5b0:	40b2                	lw	ra,12(sp)
 5b2:	4422                	lw	s0,8(sp)
 5b4:	4492                	lw	s1,4(sp)
 5b6:	4902                	lw	s2,0(sp)
 5b8:	0141                	addi	sp,sp,16
 5ba:	8082                	ret

000005bc <internal_handle_input.constprop.0>:
void handle_debug_input( int numbytes, uint8_t * data ) __attribute__((weak));
void handle_debug_input( int numbytes, uint8_t * data ) { (void)numbytes; (void)data; }

static void internal_handle_input( volatile uint32_t * dmdata0 )
{
	uint32_t dmd0 = *dmdata0;
 5bc:	e00007b7          	lui	a5,0xe0000
 5c0:	3407a783          	lw	a5,832(a5) # e0000340 <_eusrstack+0xbfffd340>
	int bytes = (dmd0 & 0x3f) - 4;
	if( bytes > 0 && bytes < 16 )
	{
		handle_debug_input( bytes, ((uint8_t*)dmdata0) + 1 );
	}
}
 5c4:	8082                	ret

000005c6 <_write.constprop.0>:
//     status word = 0xcx = timed out.
// declare as weak to allow overriding.
WEAK int _write(int fd, const char *buf, int size)
{
	(void)fd;
	if( ( *DMDATA0 & 0xc0 ) == 0xc0 ) return 0;
 5c6:	e0000737          	lui	a4,0xe0000
 5ca:	34072783          	lw	a5,832(a4) # e0000340 <_eusrstack+0xbfffd340>
WEAK int _write(int fd, const char *buf, int size)
 5ce:	7139                	addi	sp,sp,-64
 5d0:	de06                	sw	ra,60(sp)
 5d2:	dc22                	sw	s0,56(sp)
 5d4:	da26                	sw	s1,52(sp)
 5d6:	d84a                	sw	s2,48(sp)
 5d8:	d64e                	sw	s3,44(sp)
 5da:	d452                	sw	s4,40(sp)
 5dc:	d256                	sw	s5,36(sp)
 5de:	d05a                	sw	s6,32(sp)
 5e0:	ce5e                	sw	s7,28(sp)
 5e2:	cc62                	sw	s8,24(sp)
 5e4:	ca66                	sw	s9,20(sp)
	if( ( *DMDATA0 & 0xc0 ) == 0xc0 ) return 0;
 5e6:	0c07f793          	andi	a5,a5,192
 5ea:	0c000693          	li	a3,192
 5ee:	0ad78a63          	beq	a5,a3,6a2 <_write.constprop.0+0xdc>

	char buffer[4] = { 0 };
 5f2:	c602                	sw	zero,12(sp)
 5f4:	842e                	mv	s0,a1
	int place = 0;
	uint32_t lastdmd;
	uint32_t timeout = FUNCONF_DEBUGPRINTF_TIMEOUT; // Give up after ~120ms

	if( size == 0 )
 5f6:	e9c5                	bnez	a1,6a6 <_write.constprop.0+0xe0>
	{
		lastdmd = (*DMDATA0);
 5f8:	34072783          	lw	a5,832(a4)
		if( lastdmd && !(lastdmd&0x80) ) internal_handle_input( (uint32_t*)DMDATA0 );
 5fc:	c789                	beqz	a5,606 <_write.constprop.0+0x40>
 5fe:	0807f793          	andi	a5,a5,128
 602:	e391                	bnez	a5,606 <_write.constprop.0+0x40>
 604:	3f65                	jal	5bc <internal_handle_input.constprop.0>

		//buf += tosend;
		place += tosend;
	}
	return size;
}
 606:	50f2                	lw	ra,60(sp)
 608:	8522                	mv	a0,s0
 60a:	5462                	lw	s0,56(sp)
 60c:	54d2                	lw	s1,52(sp)
 60e:	5942                	lw	s2,48(sp)
 610:	59b2                	lw	s3,44(sp)
 612:	5a22                	lw	s4,40(sp)
 614:	5a92                	lw	s5,36(sp)
 616:	5b02                	lw	s6,32(sp)
 618:	4bf2                	lw	s7,28(sp)
 61a:	4c62                	lw	s8,24(sp)
 61c:	4cd2                	lw	s9,20(sp)
 61e:	6121                	addi	sp,sp,64
 620:	8082                	ret
		int tosend = size - place;
 622:	40940cb3          	sub	s9,s0,s1
 626:	8966                	mv	s2,s9
 628:	019ad363          	bge	s5,s9,62e <_write.constprop.0+0x68>
 62c:	491d                	li	s2,7
 62e:	001b0793          	addi	a5,s6,1
		while( ( lastdmd = (*DMDATA0) ) & 0x80 )
 632:	340a2703          	lw	a4,832(s4)
 636:	340a0693          	addi	a3,s4,832
 63a:	08077613          	andi	a2,a4,128
 63e:	ee21                	bnez	a2,696 <_write.constprop.0+0xd0>
		if( lastdmd ) internal_handle_input( (uint32_t*)DMDATA0 );
 640:	c311                	beqz	a4,644 <_write.constprop.0+0x7e>
 642:	3fad                	jal	5bc <internal_handle_input.constprop.0>
			buffer[t-3] = buf[t+place];
 644:	4601                	li	a2,0
 646:	019bd463          	bge	s7,s9,64e <_write.constprop.0+0x88>
 64a:	ffd90613          	addi	a2,s2,-3
 64e:	00348593          	addi	a1,s1,3
 652:	95ce                	add	a1,a1,s3
 654:	0068                	addi	a0,sp,12
 656:	2239                	jal	764 <memcpy>
		*DMDATA1 = *(uint32_t*)&(buffer[0]);
 658:	47b2                	lw	a5,12(sp)
 65a:	00998733          	add	a4,s3,s1
 65e:	34fa2223          	sw	a5,836(s4)
		t = 0;
 662:	4781                	li	a5,0
			buffer[t+1] = buf[t+place];
 664:	00074603          	lbu	a2,0(a4)
 668:	0785                	addi	a5,a5,1
 66a:	0074                	addi	a3,sp,12
 66c:	96be                	add	a3,a3,a5
 66e:	00c68023          	sb	a2,0(a3) # 100000 <ble_beacon.c.d6dc49b8+0xfdcad>
		while( t < tosend && t < 3 )
 672:	00f90563          	beq	s2,a5,67c <_write.constprop.0+0xb6>
 676:	0705                	addi	a4,a4,1
 678:	ff8796e3          	bne	a5,s8,664 <_write.constprop.0+0x9e>
		buffer[0] = 0x80 | (tosend + 4);
 67c:	00490793          	addi	a5,s2,4
 680:	f807e793          	ori	a5,a5,-128
 684:	00f10623          	sb	a5,12(sp)
		*DMDATA0 = *(uint32_t*)&(buffer[0]);
 688:	47b2                	lw	a5,12(sp)
		place += tosend;
 68a:	94ca                	add	s1,s1,s2
		*DMDATA0 = *(uint32_t*)&(buffer[0]);
 68c:	34fa2023          	sw	a5,832(s4)
	while( place < size )
 690:	f884c9e3          	blt	s1,s0,622 <_write.constprop.0+0x5c>
 694:	bf8d                	j	606 <_write.constprop.0+0x40>
			if( timeout-- == 0 )
 696:	17fd                	addi	a5,a5,-1
 698:	ffc9                	bnez	a5,632 <_write.constprop.0+0x6c>
				*DMDATA0 |= 0xc0;
 69a:	429c                	lw	a5,0(a3)
 69c:	0c07e793          	ori	a5,a5,192
 6a0:	c29c                	sw	a5,0(a3)
	if( ( *DMDATA0 & 0xc0 ) == 0xc0 ) return 0;
 6a2:	4401                	li	s0,0
 6a4:	b78d                	j	606 <_write.constprop.0+0x40>
 6a6:	89aa                	mv	s3,a0
	if( size == 0 )
 6a8:	4481                	li	s1,0
 6aa:	4a9d                	li	s5,7
		int tosend = size - place;
 6ac:	00100b37          	lui	s6,0x100
		while( ( lastdmd = (*DMDATA0) ) & 0x80 )
 6b0:	e0000a37          	lui	s4,0xe0000
			buffer[t-3] = buf[t+place];
 6b4:	4b89                	li	s7,2
		while( t < tosend && t < 3 )
 6b6:	4c0d                	li	s8,3
 6b8:	bfe1                	j	690 <_write.constprop.0+0xca>

000006ba <handle_reset>:
	asm volatile( "\n\
 6ba:	20000197          	auipc	gp,0x20000
 6be:	d4218193          	addi	gp,gp,-702 # 200003fc <__global_pointer$>
 6c2:	20003117          	auipc	sp,0x20003
 6c6:	93e10113          	addi	sp,sp,-1730 # 20003000 <_eusrstack>
	asm volatile(
 6ca:	c2018513          	addi	a0,gp,-992 # 2000001c <rx_ready>
 6ce:	06c18593          	addi	a1,gp,108 # 20000468 <_ebss>
 6d2:	00b57763          	bgeu	a0,a1,6e0 <handle_reset+0x26>
 6d6:	00052023          	sw	zero,0(a0)
 6da:	0511                	addi	a0,a0,4
 6dc:	feb56de3          	bltu	a0,a1,6d6 <handle_reset+0x1c>
 6e0:	00000517          	auipc	a0,0x0
 6e4:	54c50513          	addi	a0,a0,1356 # c2c <_data_lma>
 6e8:	c0418593          	addi	a1,gp,-1020 # 20000000 <adv>
 6ec:	c2018613          	addi	a2,gp,-992 # 2000001c <rx_ready>
 6f0:	00c58a63          	beq	a1,a2,704 <handle_reset+0x4a>
 6f4:	00052283          	lw	t0,0(a0)
 6f8:	0055a023          	sw	t0,0(a1) # 1000 <_data_lma+0x3d4>
 6fc:	0511                	addi	a0,a0,4
 6fe:	0591                	addi	a1,a1,4
 700:	fec5eae3          	bltu	a1,a2,6f4 <handle_reset+0x3a>
	asm volatile(
 704:	00000793          	li	a5,0
 708:	42fd                	li	t0,31
 70a:	bc029073          	csrw	0xbc0,t0
 70e:	6289                	lui	t0,0x2
 710:	88828293          	addi	t0,t0,-1912 # 1888 <ch32fun.c.909004c7+0x480>
 714:	3002a073          	csrs	mstatus,t0
 718:	00000297          	auipc	t0,0x0
 71c:	8e828293          	addi	t0,t0,-1816 # 0 <InterruptVector>
 720:	0032e293          	ori	t0,t0,3
 724:	30529073          	csrw	mtvec,t0
	SysTick->CTLR = 1;
 728:	e000f7b7          	lui	a5,0xe000f
 72c:	4705                	li	a4,1
 72e:	c398                	sw	a4,0(a5)
	asm volatile(
 730:	6785                	lui	a5,0x1
 732:	82478793          	addi	a5,a5,-2012 # 824 <main>
 736:	34179073          	csrw	mepc,a5
 73a:	30200073          	mret

0000073e <ADC1_2_IRQHandler>:
	asm volatile( "1: j 1b" );
 73e:	a001                	j	73e <ADC1_2_IRQHandler>

00000740 <strlen>:
{
 740:	87aa                	mv	a5,a0
	for (; *s; s++);
 742:	0007c703          	lbu	a4,0(a5)
 746:	e701                	bnez	a4,74e <strlen+0xe>
}
 748:	40a78533          	sub	a0,a5,a0
 74c:	8082                	ret
	for (; *s; s++);
 74e:	0785                	addi	a5,a5,1
 750:	bfcd                	j	742 <strlen+0x2>

00000752 <memset>:
WEAK void *memset(void *dest, int c, size_t n) { unsigned char *s = dest; for (; n; n--, s++) *s = c; return dest; }
 752:	962a                	add	a2,a2,a0
 754:	87aa                	mv	a5,a0
 756:	00c79363          	bne	a5,a2,75c <memset+0xa>
 75a:	8082                	ret
 75c:	00b78023          	sb	a1,0(a5)
 760:	0785                	addi	a5,a5,1
 762:	bfd5                	j	756 <memset+0x4>

00000764 <memcpy>:
{
 764:	4781                	li	a5,0
	for (; n; n--) *d++ = *s++;
 766:	00f61363          	bne	a2,a5,76c <memcpy+0x8>
}
 76a:	8082                	ret
	for (; n; n--) *d++ = *s++;
 76c:	00f58733          	add	a4,a1,a5
 770:	00074683          	lbu	a3,0(a4)
 774:	00f50733          	add	a4,a0,a5
 778:	0785                	addi	a5,a5,1
 77a:	00d70023          	sb	a3,0(a4)
 77e:	b7e5                	j	766 <memcpy+0x2>

00000780 <puts>:
{
 780:	1141                	addi	sp,sp,-16
 782:	c606                	sw	ra,12(sp)
 784:	c422                	sw	s0,8(sp)
 786:	c226                	sw	s1,4(sp)
 788:	84aa                	mv	s1,a0
	int sl = strlen( s );
 78a:	3f5d                	jal	740 <strlen>
 78c:	842a                	mv	s0,a0
	_write(0, s, sl );
 78e:	85aa                	mv	a1,a0
 790:	8526                	mv	a0,s1
 792:	3d15                	jal	5c6 <_write.constprop.0>
	_write(0, "\n", 1 );
 794:	6505                	lui	a0,0x1
 796:	4585                	li	a1,1
 798:	be450513          	addi	a0,a0,-1052 # be4 <RTC_IRQHandler+0x1c>
 79c:	352d                	jal	5c6 <_write.constprop.0>
}
 79e:	40b2                	lw	ra,12(sp)
 7a0:	00140513          	addi	a0,s0,1 # 4000d001 <_eusrstack+0x2000a001>
 7a4:	4422                	lw	s0,8(sp)
 7a6:	4492                	lw	s1,4(sp)
 7a8:	0141                	addi	sp,sp,16
 7aa:	8082                	ret

000007ac <SystemInit>:
	}
	else
	{
		if((sc & RB_CLK_SYS_MOD) == 0x40) // PLL div
		{
			SYS_SAFE_ACCESS(
 7ac:	400017b7          	lui	a5,0x40001
 7b0:	05700593          	li	a1,87
 7b4:	04b78023          	sb	a1,64(a5) # 40001040 <_eusrstack+0x1fffe040>
 7b8:	fa800613          	li	a2,-88
 7bc:	04c78023          	sb	a2,64(a5)
 7c0:	0001                	nop
 7c2:	0001                	nop
 7c4:	00a7c703          	lbu	a4,10(a5)
 7c8:	400026b7          	lui	a3,0x40002
 7cc:	0ff77713          	andi	a4,a4,255
 7d0:	01076713          	ori	a4,a4,16
 7d4:	00e78523          	sb	a4,10(a5)
 7d8:	4705                	li	a4,1
 7da:	80e683a3          	sb	a4,-2041(a3) # 40001807 <_eusrstack+0x1fffe807>
 7de:	8056c703          	lbu	a4,-2043(a3)
 7e2:	0ff77713          	andi	a4,a4,255
 7e6:	01076713          	ori	a4,a4,16
 7ea:	80e682a3          	sb	a4,-2043(a3)
 7ee:	04078023          	sb	zero,64(a5)
 7f2:	0001                	nop
 7f4:	0001                	nop
		{
			SYS_SAFE_ACCESS(
				R8_FLASH_CFG = (sc & 0x1F) ? 0x02 : 0x07;
			);
		}
		SYS_SAFE_ACCESS(
 7f6:	04b78023          	sb	a1,64(a5)
 7fa:	04c78023          	sb	a2,64(a5)
 7fe:	0001                	nop
 800:	0001                	nop
 802:	04a00713          	li	a4,74
 806:	00e78423          	sb	a4,8(a5)
 80a:	04078023          	sb	zero,64(a5)
 80e:	0001                	nop
 810:	0001                	nop
	*DMDATA1 = 0x00;
 812:	e00007b7          	lui	a5,0xe0000
 816:	3407a223          	sw	zero,836(a5) # e0000344 <_eusrstack+0xbfffd344>
	*DMDATA0 = 0x80;
 81a:	08000713          	li	a4,128
 81e:	34e7a023          	sw	a4,832(a5)
	SetupDebugPrintf();
#endif
#if defined(FUNCONF_SUPPORT_CONSTRUCTORS) && FUNCONF_SUPPORT_CONSTRUCTORS
	CallConstructors();
#endif
}
 822:	8082                	ret

00000824 <main>:

int main() {
 824:	711d                	addi	sp,sp,-96
 826:	cca2                	sw	s0,88(sp)
 828:	ce86                	sw	ra,92(sp)
 82a:	caa6                	sw	s1,84(sp)
 82c:	c8ca                	sw	s2,80(sp)
 82e:	c6ce                	sw	s3,76(sp)
 830:	c4d2                	sw	s4,72(sp)
 832:	c2d6                	sw	s5,68(sp)
 834:	c0da                	sw	s6,64(sp)
 836:	de5e                	sw	s7,60(sp)
 838:	dc62                	sw	s8,56(sp)
 83a:	da66                	sw	s9,52(sp)
 83c:	d86a                	sw	s10,48(sp)
 83e:	d66e                	sw	s11,44(sp)
 840:	1080                	addi	s0,sp,96
	SystemInit();
 842:	37ad                	jal	7ac <SystemInit>
	SYS_SAFE_ACCESS
 844:	400017b7          	lui	a5,0x40001
 848:	05700613          	li	a2,87
 84c:	04c78023          	sb	a2,64(a5) # 40001040 <_eusrstack+0x1fffe040>
 850:	fa800693          	li	a3,-88
 854:	04d78023          	sb	a3,64(a5)
 858:	0001                	nop
 85a:	0001                	nop
 85c:	02f7c703          	lbu	a4,47(a5)
 860:	0ff77713          	andi	a4,a4,255
 864:	00176713          	ori	a4,a4,1
 868:	02e787a3          	sb	a4,47(a5)
 86c:	04078023          	sb	zero,64(a5)
 870:	0001                	nop
 872:	0001                	nop
	SYS_SAFE_ACCESS
 874:	04c78023          	sb	a2,64(a5)
 878:	04d78023          	sb	a3,64(a5)
 87c:	0001                	nop
 87e:	0001                	nop
 880:	0207aa23          	sw	zero,52(a5)
 884:	5b98                	lw	a4,48(a5)
 886:	08076713          	ori	a4,a4,128
 88a:	db98                	sw	a4,48(a5)
 88c:	5b98                	lw	a4,48(a5)
 88e:	04076713          	ori	a4,a4,64
 892:	db98                	sw	a4,48(a5)
 894:	0317c703          	lbu	a4,49(a5)
 898:	0ff77713          	andi	a4,a4,255
 89c:	02076713          	ori	a4,a4,32
 8a0:	02e788a3          	sb	a4,49(a5)
 8a4:	04078023          	sb	zero,64(a5)
 8a8:	0001                	nop
 8aa:	0001                	nop
	SYS_SAFE_ACCESS
 8ac:	04c78023          	sb	a2,64(a5)
 8b0:	04d78023          	sb	a3,64(a5)
 8b4:	0001                	nop
 8b6:	0001                	nop
 8b8:	0317c703          	lbu	a4,49(a5)
 8bc:	0ff77713          	andi	a4,a4,255
 8c0:	02076713          	ori	a4,a4,32
 8c4:	02e788a3          	sb	a4,49(a5)
 8c8:	00e7c703          	lbu	a4,14(a5)
 8cc:	0ff77713          	andi	a4,a4,255
 8d0:	00876713          	ori	a4,a4,8
 8d4:	00e78723          	sb	a4,14(a5)
 8d8:	04078023          	sb	zero,64(a5)
 8dc:	0001                	nop
 8de:	0001                	nop
	NVIC->IENR[((uint32_t)(RTC_IRQn) >> 5)] = (1 << ((uint32_t)(RTC_IRQn) & 0x1F));
 8e0:	100006b7          	lui	a3,0x10000
 8e4:	e000e737          	lui	a4,0xe000e
 8e8:	10d72023          	sw	a3,256(a4) # e000e100 <_eusrstack+0xc000b100>
	R32_PA_DIR = 0; //Direction input
 8ec:	0a07a023          	sw	zero,160(a5)
	R32_PA_PD_DRV = 0; //Disable pull-down
 8f0:	0a07aa23          	sw	zero,180(a5)
	R32_PA_PU = P_All; //Enable pull-up
 8f4:	577d                	li	a4,-1
 8f6:	08078793          	addi	a5,a5,128
 8fa:	db98                	sw	a4,48(a5)
		*(&R32_PA_PD_DRV + OFFSET_FOR_GPIOB(pin)) |= (pin & ~PB);
		*(&R32_PA_PU + OFFSET_FOR_GPIOB(pin))     &= ~(pin & ~PB);
		*(&R32_PA_DIR + OFFSET_FOR_GPIOB(pin))    &= ~(pin & ~PB);
		break;
	case GPIO_ModeOut_PP_5mA:
		*(&R32_PA_PD_DRV + OFFSET_FOR_GPIOB(pin)) &= ~(pin & ~PB);
 8fc:	5bd8                	lw	a4,52(a5)

	// Uncomment to disable whitening to debug RF.
	//BB->CTRL_CFG |= (1<<6);
	DevSetMode(DEVSETMODE_TX);

	BB->ACCESSADDRESS1 = 0x8E89BED6; // access address
 8fe:	8e89c937          	lui	s2,0x8e89c
 902:	dff77713          	andi	a4,a4,-513
 906:	dbd8                	sw	a4,52(a5)
		*(&R32_PA_DIR + OFFSET_FOR_GPIOB(pin))    |= (pin & ~PB);
 908:	5398                	lw	a4,32(a5)
	BB->CRCINIT1 = 0x555555; // crc init
 90a:	005559b7          	lui	s3,0x555
#ifdef CH570_CH572
	BB->ACCESSADDRESS2 = 0x8E89BED6;
	BB->CRCINIT2 = 0x555555;
	BB->CRCPOLY1 = (BB->CRCPOLY1 & 0xff000000) | 0x80032d; // crc poly
 90e:	00800a37          	lui	s4,0x800
 912:	20076713          	ori	a4,a4,512
 916:	d398                	sw	a4,32(a5)

	funGpioInitAll();
	funPinMode( LED, GPIO_CFGLR_OUT_2Mhz_PP );

	uint8_t txPower = LL_TX_POWER_0_DBM;
	RFCoreInit(txPower);
 918:	3879                	jal	1b6 <RFCoreInit.constprop.0>

	blink(5);
 91a:	4515                	li	a0,5
 91c:	39b1                	jal	578 <blink>
	printf(".~ ch32fun BLE beacon ~.\n");
 91e:	6505                	lui	a0,0x1
 920:	be850513          	addi	a0,a0,-1048 # be8 <RTC_IRQHandler+0x20>
	BB->CRCPOLY2 = (BB->CRCPOLY2 & 0xff000000) | 0x80032d;
#endif
	// LL->LL1 = (LL->LL1 & 0xfffffffe) | 1; // The "| 1" is for AUTO mode, to swap between RX <-> TX when either happened

	ADV_BUF[0] = 0x02; // PDU 0x00, 0x02, 0x06 seem to work, with only 0x02 showing up on the phone
 924:	6b85                	lui	s7,0x1
 926:	3da9                	jal	780 <puts>

	while(1) {
		// BLE advertisements are sent on channels 37, 38 and 39, over the 1M PHY
		for(int c = 0; c < sizeof(adv_channels); c++) {
			Frame_TX(adv, sizeof(adv), adv_channels[c], PHY_1M);
 928:	c1c18a93          	addi	s5,gp,-996 # 20000018 <adv_channels>
	BB->ACCESSADDRESS1 = 0x8E89BED6; // access address
 92c:	ed690913          	addi	s2,s2,-298 # 8e89bed6 <_eusrstack+0x6e898ed6>
	BB->CRCINIT1 = 0x555555; // crc init
 930:	55598993          	addi	s3,s3,1365 # 555555 <ble_beacon.c.d6dc49b8+0x553202>
	BB->CRCPOLY1 = (BB->CRCPOLY1 & 0xff000000) | 0x80032d; // crc poly
 934:	32da0a13          	addi	s4,s4,813 # 80032d <ble_beacon.c.d6dc49b8+0x7fdfda>
	ADV_BUF[0] = 0x02; // PDU 0x00, 0x02, 0x06 seem to work, with only 0x02 showing up on the phone
 938:	302b8c13          	addi	s8,s7,770 # 1302 <_data_lma+0x6d6>
	RF->RF11 &= 0xfffffffd;
 93c:	4000db37          	lui	s6,0x4000d
		for(int c = 0; c < sizeof(adv_channels); c++) {
 940:	4d81                	li	s11,0
	BB->CTRL_TX = (BB->CTRL_TX & 0xfffffffc) | 1;
 942:	4000c637          	lui	a2,0x4000c
 946:	10060493          	addi	s1,a2,256 # 4000c100 <_eusrstack+0x20009100>
 94a:	58d8                	lw	a4,52(s1)
			Frame_TX(adv, sizeof(adv), adv_channels[c], PHY_1M);
 94c:	01ba87b3          	add	a5,s5,s11
 950:	0007c683          	lbu	a3,0(a5)
 954:	9b71                	andi	a4,a4,-4
 956:	00176713          	ori	a4,a4,1
 95a:	d8d8                	sw	a4,52(s1)
	RF->RF11 &= 0xfffffffd;
 95c:	02cb2783          	lw	a5,44(s6) # 4000d02c <_eusrstack+0x2000a02c>
	BB->CTRL_CFG = (BB->CTRL_CFG & 0xffffff80) | (channel & 0x7f);
 960:	07f6f713          	andi	a4,a3,127
	DevSetMode(DEVSETMODE_TX);
 964:	25800513          	li	a0,600
	RF->RF11 &= 0xfffffffd;
 968:	9bf5                	andi	a5,a5,-3
 96a:	02fb2623          	sw	a5,44(s6)
	BB->CTRL_CFG = (BB->CTRL_CFG & 0xffffff80) | (channel & 0x7f);
 96e:	10062783          	lw	a5,256(a2)
void Frame_TX(uint8_t adv[], size_t len, uint8_t channel, uint8_t phy_mode) {
 972:	8d0a                	mv	s10,sp
	BB->CTRL_CFG = (BB->CTRL_CFG & 0xffffff80) | (channel & 0x7f);
 974:	f807f793          	andi	a5,a5,-128
 978:	8fd9                	or	a5,a5,a4
 97a:	10f62023          	sw	a5,256(a2)
	DevSetMode(DEVSETMODE_TX);
 97e:	f5cff0ef          	jal	ra,da <DevSetMode>
	BB->ACCESSADDRESS1 = 0x8E89BED6; // access address
 982:	0124a623          	sw	s2,12(s1)
	BB->CRCINIT1 = 0x555555; // crc init
 986:	0134a223          	sw	s3,4(s1)
	BB->ACCESSADDRESS2 = 0x8E89BED6;
 98a:	0724a023          	sw	s2,96(s1)
	BB->CRCINIT2 = 0x555555;
 98e:	0534ac23          	sw	s3,88(s1)
	BB->CRCPOLY1 = (BB->CRCPOLY1 & 0xff000000) | 0x80032d; // crc poly
 992:	4498                	lw	a4,8(s1)
 994:	ff0006b7          	lui	a3,0xff000
	ADV_BUF[1] = len ;
	memcpy(&ADV_BUF[2], adv, len);
 998:	464d                	li	a2,19
	BB->CRCPOLY1 = (BB->CRCPOLY1 & 0xff000000) | 0x80032d; // crc poly
 99a:	8f75                	and	a4,a4,a3
 99c:	01476733          	or	a4,a4,s4
 9a0:	c498                	sw	a4,8(s1)
	BB->CRCPOLY2 = (BB->CRCPOLY2 & 0xff000000) | 0x80032d;
 9a2:	4cfc                	lw	a5,92(s1)
	memcpy(&ADV_BUF[2], adv, len);
 9a4:	c0418593          	addi	a1,gp,-1020 # 20000000 <adv>
 9a8:	faa40513          	addi	a0,s0,-86
	BB->CRCPOLY2 = (BB->CRCPOLY2 & 0xff000000) | 0x80032d;
 9ac:	8ff5                	and	a5,a5,a3
 9ae:	0147e7b3          	or	a5,a5,s4
 9b2:	ccfc                	sw	a5,92(s1)
	ADV_BUF[0] = 0x02; // PDU 0x00, 0x02, 0x06 seem to work, with only 0x02 showing up on the phone
 9b4:	fb841423          	sh	s8,-88(s0)
	memcpy(&ADV_BUF[2], adv, len);
 9b8:	3375                	jal	764 <memcpy>

#if defined(CH571_CH573)
	DMA->TXBUF = (uint32_t)ADV_BUF;
#else
	LL->FRAME_BUF = (uint32_t)ADV_BUF;
 9ba:	4000c637          	lui	a2,0x4000c
 9be:	20060793          	addi	a5,a2,512 # 4000c200 <_eusrstack+0x20009200>
 9c2:	fa840713          	addi	a4,s0,-88
 9c6:	dfb8                	sw	a4,120(a5)
#endif

	// Wait for tuning bit to clear.
	for( int timeout = 3000; !(RF->RF26 & 0x1000000) && timeout >= 0; timeout-- );
 9c8:	010006b7          	lui	a3,0x1000
	LL->FRAME_BUF = (uint32_t)ADV_BUF;
 9cc:	bbab8793          	addi	a5,s7,-1094
	for( int timeout = 3000; !(RF->RF26 & 0x1000000) && timeout >= 0; timeout-- );
 9d0:	068b2703          	lw	a4,104(s6)
 9d4:	8f75                	and	a4,a4,a3
 9d6:	e319                	bnez	a4,9dc <main+0x1b8>
 9d8:	17fd                	addi	a5,a5,-1
 9da:	fbfd                	bnez	a5,9d0 <main+0x1ac>
	}
#elif defined(CH571_CH573)
	BB->CTRL_CFG = CTRL_CFG_PHY_1M; // no 2M PHY on ch571/3
#else
	BB->CTRL_CFG = (phy_mode == PHY_2M) ? CTRL_CFG_PHY_2M:
										  CTRL_CFG_PHY_1M; // default 1M for now
 9dc:	4000c5b7          	lui	a1,0x4000c
 9e0:	1005a783          	lw	a5,256(a1) # 4000c100 <_eusrstack+0x20009100>
 9e4:	10058713          	addi	a4,a1,256
#endif

#if defined(CH570_CH572)
	BB->BB9 = (BB->BB9 & 0xf9ffffff) | ((phy_mode == PHY_2M) ? 0 : 0x2000000);
 9e8:	fa0006b7          	lui	a3,0xfa000
										  CTRL_CFG_PHY_1M; // default 1M for now
 9ec:	cff7f793          	andi	a5,a5,-769
	BB->CTRL_CFG = (phy_mode == PHY_2M) ? CTRL_CFG_PHY_2M:
 9f0:	1007e793          	ori	a5,a5,256
 9f4:	10f5a023          	sw	a5,256(a1)
	BB->BB9 = (BB->BB9 & 0xf9ffffff) | ((phy_mode == PHY_2M) ? 0 : 0x2000000);
 9f8:	535c                	lw	a5,36(a4)
 9fa:	16fd                	addi	a3,a3,-1
#if defined(CH571_CH573)
	BB->BB11 = (BB->BB11 & 0xfffffffc); // |2 for RX
#endif

	// This clears bit 17 (If set, seems to have no impact.)
	LL->LL4 &= 0xfffdffff;
 9fc:	7601                	lui	a2,0xfffe0
	BB->BB9 = (BB->BB9 & 0xf9ffffff) | ((phy_mode == PHY_2M) ? 0 : 0x2000000);
 9fe:	8ff5                	and	a5,a5,a3
 a00:	020006b7          	lui	a3,0x2000
 a04:	8fd5                	or	a5,a5,a3
 a06:	d35c                	sw	a5,36(a4)
	LL->LL4 &= 0xfffdffff;
 a08:	20058793          	addi	a5,a1,512
 a0c:	4b94                	lw	a3,16(a5)
 a0e:	167d                	addi	a2,a2,-1
 a10:	8ef1                	and	a3,a3,a2
 a12:	cb94                	sw	a3,16(a5)

#if !defined(CH571_CH573)
	LL->STATUS = LL_STATUS_TX;
 a14:	000206b7          	lui	a3,0x20
 a18:	c794                	sw	a3,8(a5)
#endif
	LL->TMR = (uint32_t)(len *512); // needs optimisation, per phy mode
 a1a:	6689                	lui	a3,0x2
 a1c:	60068693          	addi	a3,a3,1536 # 2600 <ble_beacon.c.d6dc49b8+0x2ad>
 a20:	d3f4                	sw	a3,100(a5)

	BB->CTRL_CFG |= CTRL_CFG_START_TX;
 a22:	1005a783          	lw	a5,256(a1)
 a26:	010006b7          	lui	a3,0x1000
 a2a:	8fd5                	or	a5,a5,a3
 a2c:	10f5a023          	sw	a5,256(a1)
	BB->CTRL_TX &= 0xfffffffc;
 a30:	5b5c                	lw	a5,52(a4)
 a32:	9bf1                	andi	a5,a5,-4
 a34:	db5c                	sw	a5,52(a4)

	LL->LL0 = 2; // Not sure what this does, but on RX it's 1
 a36:	4789                	li	a5,2
 a38:	20f5a023          	sw	a5,512(a1)

	while(LL->TMR); // wait for tx buffer to empty
 a3c:	4000c7b7          	lui	a5,0x4000c
 a40:	20078493          	addi	s1,a5,512 # 4000c200 <_eusrstack+0x20009200>
 a44:	50fc                	lw	a5,100(s1)
 a46:	fbfd                	bnez	a5,a3c <main+0x218>
	DevSetMode(0);
 a48:	4501                	li	a0,0
 a4a:	e90ff0ef          	jal	ra,da <DevSetMode>
	if(LL->LL0 & 3) {
 a4e:	409c                	lw	a5,0(s1)
 a50:	8b8d                	andi	a5,a5,3
 a52:	cb89                	beqz	a5,a64 <main+0x240>
		LL->CTRL_MOD &= CTRL_MOD_RFSTOP;
 a54:	48bc                	lw	a5,80(s1)
 a56:	8ff7f793          	andi	a5,a5,-1793
 a5a:	c8bc                	sw	a5,80(s1)
		LL->LL0 |= 0x08;
 a5c:	409c                	lw	a5,0(s1)
 a5e:	0087e793          	ori	a5,a5,8
 a62:	c09c                	sw	a5,0(s1)
		for(int c = 0; c < sizeof(adv_channels); c++) {
 a64:	0d85                	addi	s11,s11,1
 a66:	478d                	li	a5,3
 a68:	816a                	mv	sp,s10
 a6a:	ecfd9ce3          	bne	s11,a5,942 <main+0x11e>
{
#if defined(CH570_CH572) && (FUNCONF_POWERED_BY_V5PIN == 1)
	power_plan |= RB_PWR_LDO5V_EN;
#endif

	RTCTrigger(cyc);
 a6e:	6509                	lui	a0,0x2
 a70:	58050513          	addi	a0,a0,1408 # 2580 <ble_beacon.c.d6dc49b8+0x22d>
 a74:	e1cff0ef          	jal	ra,90 <RTCTrigger>

#ifdef CH570_CH572
#if ( CLK_SOURCE_CH5XX == CLK_SOURCE_PLL_75MHz ) || ( CLK_SOURCE_CH5XX == CLK_SOURCE_PLL_100MHz )
	//if system clock is higher than 60Mhz, it need to be reduced before sleep.
	SYS_SAFE_ACCESS
 a78:	400017b7          	lui	a5,0x40001
 a7c:	05700593          	li	a1,87
 a80:	04b78023          	sb	a1,64(a5) # 40001040 <_eusrstack+0x1fffe040>
 a84:	fa800613          	li	a2,-88
 a88:	04c78023          	sb	a2,64(a5)
 a8c:	0001                	nop
 a8e:	0001                	nop
 a90:	04a00713          	li	a4,74
 a94:	00e78423          	sb	a4,8(a5)
 a98:	04078023          	sb	zero,64(a5)
 a9c:	0001                	nop
 a9e:	0001                	nop
		R8_XT32K_TUNE = (R16_RTC_CNT_32K > 0x3fff) ? (R8_XT32K_TUNE & 0xfc) | 0x01 : R8_XT32K_TUNE;
		R8_XT32M_TUNE = (R8_XT32M_TUNE & 0xfc) | 0x03;
	);
#endif

	NVIC->SCTLR |= (1 << 2); //deep sleep
 aa0:	e000f737          	lui	a4,0xe000f
 aa4:	d0070713          	addi	a4,a4,-768 # e000ed00 <_eusrstack+0xc000bd00>
 aa8:	4b14                	lw	a3,16(a4)
 aaa:	0046e693          	ori	a3,a3,4
 aae:	cb14                	sw	a3,16(a4)
	SYS_SAFE_ACCESS
 ab0:	04b78023          	sb	a1,64(a5)
 ab4:	04c78023          	sb	a2,64(a5)
 ab8:	0001                	nop
 aba:	0001                	nop
 abc:	00f7c683          	lbu	a3,15(a5)
 ac0:	fc06e693          	ori	a3,a3,-64
 ac4:	0ff6f693          	andi	a3,a3,255
 ac8:	00d787a3          	sb	a3,15(a5)
 acc:	76e1                	lui	a3,0xffff8
 ace:	06f9                	addi	a3,a3,30
 ad0:	02d79023          	sh	a3,32(a5)
 ad4:	04b7c683          	lbu	a3,75(a5)
 ad8:	0ff6f693          	andi	a3,a3,255
 adc:	0206e693          	ori	a3,a3,32
 ae0:	04d785a3          	sb	a3,75(a5)
 ae4:	04078023          	sb	zero,64(a5)
 ae8:	0001                	nop
 aea:	0001                	nop
		R8_SLP_POWER_CTRL |= RB_RAM_RET_LV;
		R16_POWER_PLAN = RB_PWR_PLAN_EN | RB_PWR_CORE | power_plan;
		R8_PLL_CONFIG |= (1 << 5);
	);
	
	NVIC->SCTLR &= ~(1 << 3); // wfi
 aec:	4b1c                	lw	a5,16(a4)
 aee:	9bdd                	andi	a5,a5,-9
 af0:	cb1c                	sw	a5,16(a4)
	asm volatile ("wfi\nnop\nnop" );
 af2:	10500073          	wfi
 af6:	0001                	nop
 af8:	0001                	nop
 afa:	19100793          	li	a5,401
#ifdef CH570_CH572
#if ( CLK_SOURCE_CH5XX == CLK_SOURCE_PLL_75MHz ) || ( CLK_SOURCE_CH5XX == CLK_SOURCE_PLL_100MHz )
	//machine delay for a while.
	uint16_t i = 400;
	do {
		asm volatile("nop");
 afe:	0001                	nop
	} while(i--);
 b00:	17fd                	addi	a5,a5,-1
 b02:	07c2                	slli	a5,a5,0x10
 b04:	83c1                	srli	a5,a5,0x10
 b06:	ffe5                	bnez	a5,afe <main+0x2da>

	//get system clock back to normal
	SYS_SAFE_ACCESS
 b08:	400017b7          	lui	a5,0x40001
 b0c:	05700713          	li	a4,87
 b10:	04e78023          	sb	a4,64(a5) # 40001040 <_eusrstack+0x1fffe040>
 b14:	fa800713          	li	a4,-88
 b18:	04e78023          	sb	a4,64(a5)
 b1c:	0001                	nop
 b1e:	0001                	nop
 b20:	04a00713          	li	a4,74
 b24:	00e78423          	sb	a4,8(a5)
 b28:	04078023          	sb	zero,64(a5)
 b2c:	0001                	nop
 b2e:	0001                	nop
		}

		LowPower( MS_TO_RTC(SLEEPTIME_MS), (RB_PWR_RAM2K | RB_PWR_RAMX | RB_PWR_EXTEND) ); // PWR_RAM can be optimized

		RFCoreInit(txPower); // RF wakes up in an odd state, we need to reinit after sleep
 b30:	e86ff0ef          	jal	ra,1b6 <RFCoreInit.constprop.0>
		DCDCEnable(); // DCDC gets disabled during sleep
		blink(1);
 b34:	4505                	li	a0,1
 b36:	3489                	jal	578 <blink>
	while(1) {
 b38:	b521                	j	940 <main+0x11c>

00000b3a <LLE_IRQHandler>:
void LLE_IRQHandler() {
 b3a:	715d                	addi	sp,sp,-80
 b3c:	dc26                	sw	s1,56(sp)
		LL->STATUS &= LL->INT_EN;
 b3e:	4000c4b7          	lui	s1,0x4000c
void LLE_IRQHandler() {
 b42:	de22                	sw	s0,60(sp)
		LL->STATUS &= LL->INT_EN;
 b44:	20048413          	addi	s0,s1,512 # 4000c200 <_eusrstack+0x20009200>
void LLE_IRQHandler() {
 b48:	d23a                	sw	a4,36(sp)
 b4a:	d03e                	sw	a5,32(sp)
		LL->STATUS &= LL->INT_EN;
 b4c:	4458                	lw	a4,12(s0)
 b4e:	441c                	lw	a5,8(s0)
void LLE_IRQHandler() {
 b50:	da2a                	sw	a0,52(sp)
 b52:	c686                	sw	ra,76(sp)
 b54:	c496                	sw	t0,72(sp)
 b56:	c29a                	sw	t1,68(sp)
 b58:	c09e                	sw	t2,64(sp)
 b5a:	d82e                	sw	a1,48(sp)
 b5c:	d632                	sw	a2,44(sp)
 b5e:	d436                	sw	a3,40(sp)
 b60:	ce42                	sw	a6,28(sp)
 b62:	cc46                	sw	a7,24(sp)
 b64:	ca72                	sw	t3,20(sp)
 b66:	c876                	sw	t4,16(sp)
 b68:	c67a                	sw	t5,12(sp)
 b6a:	c47e                	sw	t6,8(sp)
		LL->STATUS &= LL->INT_EN;
 b6c:	8ff9                	and	a5,a5,a4
 b6e:	c41c                	sw	a5,8(s0)
		BB->CTRL_TX = (BB->CTRL_TX & 0xfffffffc) | 1;
 b70:	10048713          	addi	a4,s1,256
 b74:	5b5c                	lw	a5,52(a4)
	DevSetMode(0);
 b76:	4501                	li	a0,0
		BB->CTRL_TX = (BB->CTRL_TX & 0xfffffffc) | 1;
 b78:	9bf1                	andi	a5,a5,-4
 b7a:	0017e793          	ori	a5,a5,1
 b7e:	db5c                	sw	a5,52(a4)
	DevSetMode(0);
 b80:	d5aff0ef          	jal	ra,da <DevSetMode>
	LL->CTRL_MOD &= CTRL_MOD_RFSTOP;
 b84:	483c                	lw	a5,80(s0)
	rx_ready = 1;
 b86:	4705                	li	a4,1
}
 b88:	40b6                	lw	ra,76(sp)
	LL->CTRL_MOD &= CTRL_MOD_RFSTOP;
 b8a:	8ff7f793          	andi	a5,a5,-1793
 b8e:	c83c                	sw	a5,80(s0)
	LL->LL0 |= 0x08;
 b90:	2004a783          	lw	a5,512(s1)
}
 b94:	5472                	lw	s0,60(sp)
 b96:	42a6                	lw	t0,72(sp)
	LL->LL0 |= 0x08;
 b98:	0087e793          	ori	a5,a5,8
 b9c:	20f4a023          	sw	a5,512(s1)
	rx_ready = 1;
 ba0:	c2e1a023          	sw	a4,-992(gp) # 2000001c <rx_ready>
}
 ba4:	4316                	lw	t1,68(sp)
 ba6:	4386                	lw	t2,64(sp)
 ba8:	54e2                	lw	s1,56(sp)
 baa:	5552                	lw	a0,52(sp)
 bac:	55c2                	lw	a1,48(sp)
 bae:	5632                	lw	a2,44(sp)
 bb0:	56a2                	lw	a3,40(sp)
 bb2:	5712                	lw	a4,36(sp)
 bb4:	5782                	lw	a5,32(sp)
 bb6:	4872                	lw	a6,28(sp)
 bb8:	48e2                	lw	a7,24(sp)
 bba:	4e52                	lw	t3,20(sp)
 bbc:	4ec2                	lw	t4,16(sp)
 bbe:	4f32                	lw	t5,12(sp)
 bc0:	4fa2                	lw	t6,8(sp)
 bc2:	6161                	addi	sp,sp,80
 bc4:	30200073          	mret

00000bc8 <RTC_IRQHandler>:
void RTC_IRQHandler(void) {
 bc8:	1141                	addi	sp,sp,-16
 bca:	c63a                	sw	a4,12(sp)
 bcc:	c43e                	sw	a5,8(sp)
	R8_RTC_FLAG_CTRL = RB_RTC_TRIG_CLR;
 bce:	02000713          	li	a4,32
 bd2:	400017b7          	lui	a5,0x40001
 bd6:	02e78823          	sb	a4,48(a5) # 40001030 <_eusrstack+0x1fffe030>
}
 bda:	4732                	lw	a4,12(sp)
 bdc:	47a2                	lw	a5,8(sp)
 bde:	0141                	addi	sp,sp,16
 be0:	30200073          	mret
 be4:	000a                	c.slli	zero,0x2
 be6:	0000                	unimp
 be8:	7e2e                	flw	ft8,232(sp)
 bea:	6320                	flw	fs0,64(a4)
 bec:	3368                	fld	fa0,224(a4)
 bee:	6632                	flw	fa2,12(sp)
 bf0:	6e75                	lui	t3,0x1d
 bf2:	4220                	lw	s0,64(a2)
 bf4:	454c                	lw	a1,12(a0)
 bf6:	6220                	flw	fs0,64(a2)
 bf8:	6165                	addi	sp,sp,112
 bfa:	206e6f63          	bltu	t3,t1,e18 <_data_lma+0x1ec>
 bfe:	2e7e                	fld	ft8,472(sp)
 c00:	0000                	unimp
	...

00000c04 <channel_map>:
 c04:	0201 0403 0605 0807 0a09 0d0c 0f0e 1110     ................
 c14:	1312 1514 1716 1918 1b1a 1d1c 1f1e 2120     .............. !
 c24:	2322 2524 0026 270b                         "#$%&..'
