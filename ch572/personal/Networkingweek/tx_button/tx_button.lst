
tx_button.elf:     file format elf32-littleriscv


Disassembly of section .init:

00000000 <InterruptVector>:
	void InterruptVector()         __attribute__((naked)) __attribute((section(".init"))) __attribute((weak,alias("InterruptVectorDefault"))) __attribute((naked));
	void InterruptVectorDefault()  __attribute__((naked)) __attribute((section(".init"))) __attribute((naked));
	void InterruptVectorDefault( void )
	{
		#if !defined(FUNCONF_TINYVECTOR) || !FUNCONF_TINYVECTOR
			asm volatile( DEFAULT_INTERRUPT_VECTOR_CONTENTS );
   0:	16c0006f          	j	16c <handle_reset>
   4:	0000                	unimp
   6:	0000                	unimp
   8:	01ee                	slli	gp,gp,0x1b
   a:	0000                	unimp
   c:	01ee                	slli	gp,gp,0x1b
   e:	0000                	unimp
  10:	bda9                	j	fffffe6a <_eusrstack+0xdfffce6a>
  12:	f3f9                	bnez	a5,ffffffd8 <_eusrstack+0xdfffcfd8>
  14:	01ee                	slli	gp,gp,0x1b
	...
  1e:	0000                	unimp
  20:	01ee                	slli	gp,gp,0x1b
  22:	0000                	unimp
  24:	01ee                	slli	gp,gp,0x1b
	...
  2e:	0000                	unimp
  30:	01ee                	slli	gp,gp,0x1b
  32:	0000                	unimp
  34:	0000                	unimp
  36:	0000                	unimp
  38:	01ee                	slli	gp,gp,0x1b
  3a:	0000                	unimp
  3c:	0000                	unimp
  3e:	0000                	unimp
  40:	01ee                	slli	gp,gp,0x1b
  42:	0000                	unimp
  44:	01ee                	slli	gp,gp,0x1b
  46:	0000                	unimp
  48:	01ee                	slli	gp,gp,0x1b
  4a:	0000                	unimp
  4c:	01ee                	slli	gp,gp,0x1b
  4e:	0000                	unimp
  50:	01ee                	slli	gp,gp,0x1b
  52:	0000                	unimp
  54:	07bc                	addi	a5,sp,968
  56:	0000                	unimp
  58:	01ee                	slli	gp,gp,0x1b
  5a:	0000                	unimp
  5c:	0000                	unimp
  5e:	0000                	unimp
  60:	01ee                	slli	gp,gp,0x1b
  62:	0000                	unimp
  64:	01ee                	slli	gp,gp,0x1b
  66:	0000                	unimp
  68:	01ee                	slli	gp,gp,0x1b
  6a:	0000                	unimp
  6c:	01ee                	slli	gp,gp,0x1b
  6e:	0000                	unimp
  70:	01ee                	slli	gp,gp,0x1b
  72:	0000                	unimp
  74:	01ee                	slli	gp,gp,0x1b
  76:	0000                	unimp
  78:	01ee                	slli	gp,gp,0x1b
  7a:	0000                	unimp
  7c:	01ee                	slli	gp,gp,0x1b
  7e:	0000                	unimp
  80:	01ee                	slli	gp,gp,0x1b
  82:	0000                	unimp
  84:	01ee                	slli	gp,gp,0x1b
  86:	0000                	unimp
  88:	01ee                	slli	gp,gp,0x1b
  8a:	0000                	unimp
  8c:	01ee                	slli	gp,gp,0x1b
	...

Disassembly of section .text:

00000090 <DevSetMode>:
	NVIC->VTFIDR[3] = 0x14;
}

void DevSetMode(uint16_t mode) {
#if !defined(CH571_CH573)
	if(mode) {
  90:	fffd07b7          	lui	a5,0xfffd0
		BB->CTRL_CFG = DEVSETMODE_ON;
  94:	4000c6b7          	lui	a3,0x4000c
  98:	fff78713          	addi	a4,a5,-1 # fffcffff <_eusrstack+0xdffccfff>
  9c:	1006a783          	lw	a5,256(a3) # 4000c100 <_eusrstack+0x20009100>
  a0:	8ff9                	and	a5,a5,a4
	if(mode) {
  a2:	c11d                	beqz	a0,c8 <DevSetMode+0x38>
		BB->CTRL_CFG = DEVSETMODE_ON;
  a4:	00020737          	lui	a4,0x20
  a8:	8fd9                	or	a5,a5,a4
  aa:	10f6a023          	sw	a5,256(a3)
		RF->RF2 |= 0x330000;
  ae:	4000d737          	lui	a4,0x4000d
  b2:	471c                	lw	a5,8(a4)
  b4:	003306b7          	lui	a3,0x330
  b8:	8fd5                	or	a5,a5,a3
  ba:	c71c                	sw	a5,8(a4)
	mode = (mode == 0) ? 0x80 : mode;
#elif !defined(CH32V208)
	mode |= 0x30000;
#endif
#endif // ! CH571_CH573
	LL->CTRL_MOD = mode;
  bc:	4000c7b7          	lui	a5,0x4000c
  c0:	20078793          	addi	a5,a5,512 # 4000c200 <_eusrstack+0x20009200>
  c4:	cba8                	sw	a0,80(a5)
}
  c6:	8082                	ret
		BB->CTRL_CFG = DEVSETMODE_OFF;
  c8:	6741                	lui	a4,0x10
  ca:	8fd9                	or	a5,a5,a4
  cc:	10f6a023          	sw	a5,256(a3) # 330100 <tx_button.c.519d54de+0x32e308>
		RF->RF2 &= 0xffcdffff;
  d0:	4000d6b7          	lui	a3,0x4000d
  d4:	469c                	lw	a5,8(a3)
  d6:	ffce0737          	lui	a4,0xffce0
  da:	177d                	addi	a4,a4,-1
  dc:	8ff9                	and	a5,a5,a4
  de:	c69c                	sw	a5,8(a3)
  e0:	bff1                	j	bc <DevSetMode+0x2c>

000000e2 <RFEND_TXCTune>:

uint32_t RFEND_TXCTune(uint8_t channel) {
	// 0xbf = 2401 MHz
	RF->RF1 &= 0xfffffffe;
  e2:	4000d737          	lui	a4,0x4000d
  e6:	435c                	lw	a5,4(a4)
	RF->TXTUNE_CTRL = (RF->TXTUNE_CTRL & 0xfffe00ff) | (0xbf00 + (channel_map[channel] << 8));
  e8:	6685                	lui	a3,0x1
  ea:	84868693          	addi	a3,a3,-1976 # 848 <channel_map>
	RF->RF1 &= 0xfffffffe;
  ee:	9bf9                	andi	a5,a5,-2
	RF->TXTUNE_CTRL = (RF->TXTUNE_CTRL & 0xfffe00ff) | (0xbf00 + (channel_map[channel] << 8));
  f0:	96aa                	add	a3,a3,a0
	RF->RF1 &= 0xfffffffe;
  f2:	c35c                	sw	a5,4(a4)
	RF->TXTUNE_CTRL = (RF->TXTUNE_CTRL & 0xfffe00ff) | (0xbf00 + (channel_map[channel] << 8));
  f4:	0006c783          	lbu	a5,0(a3)
  f8:	66b1                	lui	a3,0xc
  fa:	5f10                	lw	a2,56(a4)
  fc:	f0068693          	addi	a3,a3,-256 # bf00 <tx_button.c.519d54de+0xa108>
 100:	07a2                	slli	a5,a5,0x8
 102:	97b6                	add	a5,a5,a3
 104:	7681                	lui	a3,0xfffe0
 106:	0ff68693          	addi	a3,a3,255 # fffe00ff <_eusrstack+0xdffdd0ff>
 10a:	8e75                	and	a2,a2,a3
 10c:	8fd1                	or	a5,a5,a2
 10e:	df1c                	sw	a5,56(a4)
	RF->RF1 |= 1;
 110:	435c                	lw	a5,4(a4)

	LL->TMR = 8000;
	while(!(RF->TXCTUNE_CO_CTRL & (1 << 25)) || !(RF->TXCTUNE_CO_CTRL & (1 << 26))) {
 112:	02000637          	lui	a2,0x2000
 116:	040006b7          	lui	a3,0x4000
	RF->RF1 |= 1;
 11a:	0017e793          	ori	a5,a5,1
 11e:	c35c                	sw	a5,4(a4)
	LL->TMR = 8000;
 120:	4000c7b7          	lui	a5,0x4000c
 124:	6709                	lui	a4,0x2
 126:	f4070713          	addi	a4,a4,-192 # 1f40 <tx_button.c.519d54de+0x148>
 12a:	20078793          	addi	a5,a5,512 # 4000c200 <_eusrstack+0x20009200>
 12e:	d3f8                	sw	a4,100(a5)
		if(LL->TMR == 0) {
 130:	4000c5b7          	lui	a1,0x4000c
	while(!(RF->TXCTUNE_CO_CTRL & (1 << 25)) || !(RF->TXCTUNE_CO_CTRL & (1 << 26))) {
 134:	4000d737          	lui	a4,0x4000d
 138:	09072783          	lw	a5,144(a4) # 4000d090 <_eusrstack+0x2000a090>
 13c:	8ff1                	and	a5,a5,a2
 13e:	c789                	beqz	a5,148 <RFEND_TXCTune+0x66>
 140:	09072783          	lw	a5,144(a4)
 144:	8ff5                	and	a5,a5,a3
 146:	e789                	bnez	a5,150 <RFEND_TXCTune+0x6e>
		if(LL->TMR == 0) {
 148:	20058793          	addi	a5,a1,512 # 4000c200 <_eusrstack+0x20009200>
 14c:	53fc                	lw	a5,100(a5)
 14e:	f7ed                	bnez	a5,138 <RFEND_TXCTune+0x56>
			break;
		}
	}

	uint8_t nCO = (uint8_t)RF->TXCTUNE_CO_CTRL & 0x3f;
 150:	4000d7b7          	lui	a5,0x4000d
 154:	0907a503          	lw	a0,144(a5) # 4000d090 <_eusrstack+0x2000a090>
	uint8_t nGA = (uint8_t)(RF->TXCTUNE_GA_CTRL >> 10) & 0x7f;
 158:	0947a783          	lw	a5,148(a5)

	// printf("nCO,nGA ch:%u idx:%u %u,%u\n", channel, channel_map[channel], nCO,nGA);

	return (nGA << 24) | nCO;
 15c:	03f57513          	andi	a0,a0,63
	uint8_t nGA = (uint8_t)(RF->TXCTUNE_GA_CTRL >> 10) & 0x7f;
 160:	83a9                	srli	a5,a5,0xa
	return (nGA << 24) | nCO;
 162:	07f7f793          	andi	a5,a5,127
 166:	07e2                	slli	a5,a5,0x18
}
 168:	8d5d                	or	a0,a0,a5
 16a:	8082                	ret

0000016c <handle_reset>:

#elif defined(CH32V10x) || defined(CH32V20x) || defined(CH32V30x) || defined(CH32L103) ||  defined(CH5xx)

void handle_reset( void )
{
	asm volatile( "\n\
 16c:	20000197          	auipc	gp,0x20000
 170:	29018193          	addi	gp,gp,656 # 200003fc <__global_pointer$>
 174:	20003117          	auipc	sp,0x20003
 178:	e8c10113          	addi	sp,sp,-372 # 20003000 <_eusrstack>
#endif
			);

	// Careful: Use registers to prevent overwriting of self-data.
	// This clears out BSS.
	asm volatile(
 17c:	c0418513          	addi	a0,gp,-1020 # 20000000 <rx_ready>
 180:	05018593          	addi	a1,gp,80 # 2000044c <_ebss>
 184:	00b57763          	bgeu	a0,a1,192 <handle_reset+0x26>
 188:	00052023          	sw	zero,0(a0)
 18c:	0511                	addi	a0,a0,4
 18e:	feb56de3          	bltu	a0,a1,188 <handle_reset+0x1c>
 192:	00000517          	auipc	a0,0x0
 196:	6de50513          	addi	a0,a0,1758 # 870 <_data_lma>
 19a:	c0418593          	addi	a1,gp,-1020 # 20000000 <rx_ready>
 19e:	c0418613          	addi	a2,gp,-1020 # 20000000 <rx_ready>
 1a2:	00c58a63          	beq	a1,a2,1b6 <handle_reset+0x4a>
 1a6:	00052283          	lw	t0,0(a0)
 1aa:	0055a023          	sw	t0,0(a1)
 1ae:	0511                	addi	a0,a0,4
 1b0:	0591                	addi	a1,a1,4
 1b2:	fec5eae3          	bltu	a1,a2,1a6 <handle_reset+0x3a>
#endif
: "a0", "a1", "a2", "a3", "memory"
);

	// Setup the interrupt vector, processor status and INTSYSCR.
	asm volatile(
 1b6:	00000793          	li	a5,0
 1ba:	42fd                	li	t0,31
 1bc:	bc029073          	csrw	0xbc0,t0
 1c0:	6289                	lui	t0,0x2
 1c2:	88828293          	addi	t0,t0,-1912 # 1888 <ch32fun.c.aaad6fb6+0x7db>
 1c6:	3002a073          	csrs	mstatus,t0
 1ca:	00000297          	auipc	t0,0x0
 1ce:	e3628293          	addi	t0,t0,-458 # 0 <InterruptVector>
 1d2:	0032e293          	ori	t0,t0,3
 1d6:	30529073          	csrw	mtvec,t0
	csrw mtvec, t0\n"
	: : [InterruptVector]"r"(InterruptVector) : "t0", "memory"
	);

#if defined( FUNCONF_SYSTICK_USE_HCLK ) && FUNCONF_SYSTICK_USE_HCLK && !defined(CH32V10x)
	SysTick->CTLR = 5;
 1da:	e000f7b7          	lui	a5,0xe000f
 1de:	4715                	li	a4,5
 1e0:	c398                	sw	a4,0(a5)
#else
	SysTick->CTLR = 1;
#endif

	// set mepc to be main as the root app.
	asm volatile(
 1e2:	26a00793          	li	a5,618
 1e6:	34179073          	csrw	mepc,a5
 1ea:	30200073          	mret

000001ee <ADC1_2_IRQHandler>:
	asm volatile( "1: j 1b" );
 1ee:	a001                	j	1ee <ADC1_2_IRQHandler>

000001f0 <memset>:
WEAK void *memset(void *dest, int c, size_t n) { unsigned char *s = dest; for (; n; n--, s++) *s = c; return dest; }
 1f0:	962a                	add	a2,a2,a0
 1f2:	87aa                	mv	a5,a0
 1f4:	00c79363          	bne	a5,a2,1fa <memset+0xa>
 1f8:	8082                	ret
 1fa:	00b78023          	sb	a1,0(a5) # e000f000 <_eusrstack+0xc000c000>
 1fe:	0785                	addi	a5,a5,1
 200:	bfd5                	j	1f4 <memset+0x4>

00000202 <SystemInit>:
	}
	else
	{
		if((sc & RB_CLK_SYS_MOD) == 0x40) // PLL div
		{
			SYS_SAFE_ACCESS(
 202:	400017b7          	lui	a5,0x40001
 206:	05700593          	li	a1,87
 20a:	04b78023          	sb	a1,64(a5) # 40001040 <_eusrstack+0x1fffe040>
 20e:	fa800613          	li	a2,-88
 212:	04c78023          	sb	a2,64(a5)
 216:	0001                	nop
 218:	0001                	nop
 21a:	00a7c703          	lbu	a4,10(a5)
 21e:	400026b7          	lui	a3,0x40002
 222:	0ff77713          	andi	a4,a4,255
 226:	01076713          	ori	a4,a4,16
 22a:	00e78523          	sb	a4,10(a5)
 22e:	4705                	li	a4,1
 230:	80e683a3          	sb	a4,-2041(a3) # 40001807 <_eusrstack+0x1fffe807>
 234:	8056c703          	lbu	a4,-2043(a3)
 238:	0ff77713          	andi	a4,a4,255
 23c:	01076713          	ori	a4,a4,16
 240:	80e682a3          	sb	a4,-2043(a3)
 244:	04078023          	sb	zero,64(a5)
 248:	0001                	nop
 24a:	0001                	nop
		{
			SYS_SAFE_ACCESS(
				R8_FLASH_CFG = (sc & 0x1F) ? 0x02 : 0x07;
			);
		}
		SYS_SAFE_ACCESS(
 24c:	04b78023          	sb	a1,64(a5)
 250:	04c78023          	sb	a2,64(a5)
 254:	0001                	nop
 256:	0001                	nop
 258:	04a00713          	li	a4,74
 25c:	00e78423          	sb	a4,8(a5)
 260:	04078023          	sb	zero,64(a5)
 264:	0001                	nop
 266:	0001                	nop
	SetupDebugPrintf();
#endif
#if defined(FUNCONF_SUPPORT_CONSTRUCTORS) && FUNCONF_SUPPORT_CONSTRUCTORS
	CallConstructors();
#endif
}
 268:	8082                	ret

0000026a <main>:
    funPinMode(BTN_PIN, GPIO_CFGLR_IN_PUPD);
    // Enable Pull-Up: Set Output High while in Input Mode
    funDigitalWrite(BTN_PIN, FUN_HIGH);
}

int main() {
 26a:	7119                	addi	sp,sp,-128
 26c:	de86                	sw	ra,124(sp)
 26e:	dca2                	sw	s0,120(sp)
 270:	daa6                	sw	s1,116(sp)
 272:	0100                	addi	s0,sp,128
 274:	d8ca                	sw	s2,112(sp)
 276:	d6ce                	sw	s3,108(sp)
 278:	d4d2                	sw	s4,104(sp)
 27a:	d2d6                	sw	s5,100(sp)
 27c:	d0da                	sw	s6,96(sp)
 27e:	cede                	sw	s7,92(sp)
 280:	cce2                	sw	s8,88(sp)
 282:	cae6                	sw	s9,84(sp)
 284:	c8ea                	sw	s10,80(sp)
 286:	c6ee                	sw	s11,76(sp)
    SystemInit();
 288:	3fad                	jal	202 <SystemInit>
		*(&R32_PA_PD_DRV + OFFSET_FOR_GPIOB(pin)) &= ~(pin & ~PB);
		*(&R32_PA_PU + OFFSET_FOR_GPIOB(pin))     &= ~(pin & ~PB);
		*(&R32_PA_DIR + OFFSET_FOR_GPIOB(pin))    &= ~(pin & ~PB);
		break;
	case GPIO_ModeIN_PU:
		*(&R32_PA_PD_DRV + OFFSET_FOR_GPIOB(pin)) &= ~(pin & ~PB);
 28a:	400017b7          	lui	a5,0x40001
 28e:	08078793          	addi	a5,a5,128 # 40001080 <_eusrstack+0x1fffe080>
 292:	5bd8                	lw	a4,52(a5)
	LL->LL5 = 0x8c;
 294:	4000c6b7          	lui	a3,0x4000c
	LL->LL7 = 0x76;
 298:	07600613          	li	a2,118
 29c:	9b3d                	andi	a4,a4,-17
 29e:	dbd8                	sw	a4,52(a5)
		*(&R32_PA_PU + OFFSET_FOR_GPIOB(pin))     |= (pin & ~PB);
 2a0:	5b98                	lw	a4,48(a5)
	BB->BB14 = 0x2020c;
 2a2:	000204b7          	lui	s1,0x20
	NVIC->VTFIDR[3] = 0x14;
 2a6:	4951                	li	s2,20
 2a8:	01076713          	ori	a4,a4,16
 2ac:	db98                	sw	a4,48(a5)
		*(&R32_PA_DIR + OFFSET_FOR_GPIOB(pin))    &= ~(pin & ~PB);
 2ae:	5398                	lw	a4,32(a5)
	RF->RF3 = (RF->RF3 & 0xfffffeff) | 0x100;
	RF->RF1 = (RF->RF1 & 0xfffeffff) | 0x100000;
}

void RegInit() {
	DevSetMode(DEVSETMODE_TUNE);
 2b0:	55800513          	li	a0,1368
 2b4:	9b3d                	andi	a4,a4,-17
 2b6:	d398                	sw	a4,32(a5)
    funDigitalWrite(BTN_PIN, FUN_HIGH);
 2b8:	5798                	lw	a4,40(a5)
 2ba:	01076713          	ori	a4,a4,16
 2be:	d798                	sw	a4,40(a5)
	LL->LL5 = 0x8c;
 2c0:	20068793          	addi	a5,a3,512 # 4000c200 <_eusrstack+0x20009200>
 2c4:	08c00713          	li	a4,140
 2c8:	cbd8                	sw	a4,20(a5)
	LL->LL7 = 0x76;
 2ca:	cfd0                	sw	a2,28(a5)
	LL->LL9 = 0x8c;
 2cc:	d3d8                	sw	a4,36(a5)
	LL->LL13 = 0x8c;
 2ce:	dbd8                	sw	a4,52(a5)
	LL->LL17 = 0x8c;
 2d0:	c3f8                	sw	a4,68(a5)
	LL->LL19 = 0x76;
 2d2:	c7f0                	sw	a2,76(a5)
	LL->LL11 = 0x6c;
 2d4:	06c00713          	li	a4,108
 2d8:	d7d8                	sw	a4,44(a5)
	LL->LL15 = 0x6c;
 2da:	dfd8                	sw	a4,60(a5)
	LL->LL1 = 0x78;
 2dc:	07800713          	li	a4,120
 2e0:	c3d8                	sw	a4,4(a5)
	LL->INT_EN = 0x16000f;
 2e2:	00160737          	lui	a4,0x160
	LL->LL21 = 0;
 2e6:	0407aa23          	sw	zero,84(a5)
	LL->INT_EN = 0x16000f;
 2ea:	073d                	addi	a4,a4,15
 2ec:	c7d8                	sw	a4,12(a5)
	LL->STATE_BUF = (uint32_t)LLE_BUF;
 2ee:	c1018713          	addi	a4,gp,-1008 # 2000000c <LLE_BUF>
 2f2:	dff8                	sw	a4,124(a5)
	LL->STATUS = 0xffffffff;
 2f4:	577d                	li	a4,-1
 2f6:	c798                	sw	a4,8(a5)
	RF->RF10 = 0x480;
 2f8:	4000d637          	lui	a2,0x4000d
 2fc:	48000793          	li	a5,1152
 300:	d61c                	sw	a5,40(a2)
	RF->RF12 &= 0xfff9ffff;
 302:	5a1c                	lw	a5,48(a2)
 304:	fffa0737          	lui	a4,0xfffa0
 308:	177d                	addi	a4,a4,-1
 30a:	8ff9                	and	a5,a5,a4
 30c:	da1c                	sw	a5,48(a2)
	RF->RF12 |= 0x70000000;
 30e:	5a1c                	lw	a5,48(a2)
 310:	70000737          	lui	a4,0x70000
	RF->RF15 = (RF->RF15 & 0xf8ffffff) | 0x2000000;
 314:	85b2                	mv	a1,a2
	RF->RF12 |= 0x70000000;
 316:	8fd9                	or	a5,a5,a4
 318:	da1c                	sw	a5,48(a2)
	RF->RF15 = (RF->RF15 & 0xf8ffffff) | 0x2000000;
 31a:	5e58                	lw	a4,60(a2)
 31c:	f90007b7          	lui	a5,0xf9000
 320:	17fd                	addi	a5,a5,-1
 322:	8f7d                	and	a4,a4,a5
 324:	02000637          	lui	a2,0x2000
 328:	8f51                	or	a4,a4,a2
 32a:	ddd8                	sw	a4,60(a1)
	RF->RF15 = (RF->RF15 & 0x1fffffff) | 0x40000000;
 32c:	5ddc                	lw	a5,60(a1)
 32e:	40000737          	lui	a4,0x40000
	BB->CTRL_TX = (BB->CTRL_TX & 0x1ffffff) | (TxPower | 0x40) << 0x19;
 332:	167d                	addi	a2,a2,-1
	RF->RF15 = (RF->RF15 & 0x1fffffff) | 0x40000000;
 334:	078e                	slli	a5,a5,0x3
 336:	838d                	srli	a5,a5,0x3
 338:	8fd9                	or	a5,a5,a4
 33a:	dddc                	sw	a5,60(a1)
	RF->RF18 &= 0xfff8ffff;
 33c:	45bc                	lw	a5,72(a1)
 33e:	fff90737          	lui	a4,0xfff90
 342:	177d                	addi	a4,a4,-1
 344:	8ff9                	and	a5,a5,a4
 346:	c5bc                	sw	a5,72(a1)
	RF->RF20 = (RF->RF20 & 0xfffff8ff) | 0x300;
 348:	49b8                	lw	a4,80(a1)
 34a:	89ae                	mv	s3,a1
 34c:	8ff77713          	andi	a4,a4,-1793
 350:	30076713          	ori	a4,a4,768
 354:	c9b8                	sw	a4,80(a1)
	RF->RF23 |= 0x70000;
 356:	4dfc                	lw	a5,92(a1)
 358:	00070737          	lui	a4,0x70
 35c:	8fd9                	or	a5,a5,a4
 35e:	cdfc                	sw	a5,92(a1)
	RF->RF23 |= 0x700000;
 360:	4dfc                	lw	a5,92(a1)
 362:	00700737          	lui	a4,0x700
 366:	8fd9                	or	a5,a5,a4
 368:	cdfc                	sw	a5,92(a1)
	BB->BB14 = 0x2020c;
 36a:	10068713          	addi	a4,a3,256
 36e:	20c48793          	addi	a5,s1,524 # 2020c <tx_button.c.519d54de+0x1e414>
 372:	df1c                	sw	a5,56(a4)
	BB->BB15 = 0x50;
 374:	05000793          	li	a5,80
 378:	df5c                	sw	a5,60(a4)
	BB->CTRL_TX = (BB->CTRL_TX & 0x1ffffff) | (TxPower | 0x40) << 0x19;
 37a:	5b5c                	lw	a5,52(a4)
 37c:	8ff1                	and	a5,a5,a2
 37e:	a4000637          	lui	a2,0xa4000
 382:	8fd1                	or	a5,a5,a2
 384:	db5c                	sw	a5,52(a4)
	BB->CTRL_CFG &= 0xfffffcff;
 386:	1006a703          	lw	a4,256(a3)
	NVIC->VTFIDR[3] = 0x14;
 38a:	e000e7b7          	lui	a5,0xe000e
	BB->CTRL_CFG &= 0xfffffcff;
 38e:	cff77713          	andi	a4,a4,-769
 392:	10e6a023          	sw	a4,256(a3)
	NVIC->VTFIDR[3] = 0x14;
 396:	052789a3          	sb	s2,83(a5) # e000e053 <_eusrstack+0xc000b053>
	DevSetMode(DEVSETMODE_TUNE);
 39a:	39dd                	jal	90 <DevSetMode>
	RF->RF1 &= 0xfffffeff;
 39c:	0049a703          	lw	a4,4(s3)
	RF->RF10 &= 0xffffefff;
 3a0:	76fd                	lui	a3,0xfffff
 3a2:	16fd                	addi	a3,a3,-1
	RF->RF1 &= 0xfffffeff;
 3a4:	eff77713          	andi	a4,a4,-257
 3a8:	00e9a223          	sw	a4,4(s3)
	RF->RF10 &= 0xffffefff;
 3ac:	0289a703          	lw	a4,40(s3)
	uint32_t tune2401 = RFEND_TXCTune(37);
 3b0:	02500513          	li	a0,37
	RF->RF10 &= 0xffffefff;
 3b4:	8f75                	and	a4,a4,a3
 3b6:	02e9a423          	sw	a4,40(s3)
	RF->RF11 &= 0xffffffef;
 3ba:	02c9a703          	lw	a4,44(s3)
 3be:	9b3d                	andi	a4,a4,-17
 3c0:	02e9a623          	sw	a4,44(s3)
	RF->RF2 |= 0x20000;
 3c4:	0089a783          	lw	a5,8(s3)
 3c8:	8fc5                	or	a5,a5,s1
 3ca:	00f9a423          	sw	a5,8(s3)
	RF->RF1 |= 0x10;
 3ce:	0049a783          	lw	a5,4(s3)
 3d2:	0107e793          	ori	a5,a5,16
 3d6:	00f9a223          	sw	a5,4(s3)
	uint32_t tune2401 = RFEND_TXCTune(37);
 3da:	3321                	jal	e2 <RFEND_TXCTune>
	uint8_t nGA2401 = (uint8_t)(tune2401 >> 24) & 0x7f;
 3dc:	01855713          	srli	a4,a0,0x18
	uint32_t tune2401 = RFEND_TXCTune(37);
 3e0:	8c2a                	mv	s8,a0
	uint32_t tune2480 = RFEND_TXCTune(39);
 3e2:	02700513          	li	a0,39
	uint8_t nGA2401 = (uint8_t)(tune2401 >> 24) & 0x7f;
 3e6:	07f77b13          	andi	s6,a4,127
	uint32_t tune2480 = RFEND_TXCTune(39);
 3ea:	39e5                	jal	e2 <RFEND_TXCTune>
	uint8_t nGA2480 = (uint8_t)(tune2480 >> 24) & 0x7f;
 3ec:	01855993          	srli	s3,a0,0x18
	uint32_t tune2480 = RFEND_TXCTune(39);
 3f0:	8a2a                	mv	s4,a0
	uint32_t tune2440 = RFEND_TXCTune(18);
 3f2:	4549                	li	a0,18
 3f4:	31fd                	jal	e2 <RFEND_TXCTune>
	uint8_t nCO2440 = (uint8_t)(tune2440 & 0x3f);
 3f6:	03f57a93          	andi	s5,a0,63
	uint32_t dCO0140 = nCO2401 - nCO2440;
 3fa:	03fc7793          	andi	a5,s8,63
 3fe:	415787b3          	sub	a5,a5,s5
	uint8_t txctune_co[sizeof(RF->TXCTUNE_CO)] = {0};
 402:	02400613          	li	a2,36
 406:	4581                	li	a1,0
	uint8_t nGA2480 = (uint8_t)(tune2480 >> 24) & 0x7f;
 408:	07f9fb93          	andi	s7,s3,127
	uint32_t tune2440 = RFEND_TXCTune(18);
 40c:	84aa                	mv	s1,a0
	uint8_t nGA2440 = (uint8_t)(tune2440 >> 24) & 0x7f;
 40e:	01855993          	srli	s3,a0,0x18
	uint8_t txctune_co[sizeof(RF->TXCTUNE_CO)] = {0};
 412:	f9c40513          	addi	a0,s0,-100
	uint32_t dCO0140 = nCO2401 - nCO2440;
 416:	8c3e                	mv	s8,a5
	uint8_t txctune_co[sizeof(RF->TXCTUNE_CO)] = {0};
 418:	f8042c23          	sw	zero,-104(s0)
 41c:	3bd1                	jal	1f0 <memset>
	uint32_t dCO4080 = nCO2440 - nCO2480;
 41e:	03fa7a13          	andi	s4,s4,63
		txctune_co[f] = tune | (tune << 4);
 422:	6605                	lui	a2,0x1
 424:	032c0733          	mul	a4,s8,s2
	uint8_t nGA2440 = (uint8_t)(tune2440 >> 24) & 0x7f;
 428:	07f9f993          	andi	s3,s3,127
	uint32_t dCO4080 = nCO2440 - nCO2480;
 42c:	414a8a33          	sub	s4,s5,s4
	for(int f = 0; f < int_points; f++) {
 430:	4781                	li	a5,0
		tune = (dCO0140 * (int_points -f)) / int_points;
 432:	45d1                	li	a1,20
		txctune_co[f] = tune | (tune << 4);
 434:	f9840913          	addi	s2,s0,-104
 438:	1641                	addi	a2,a2,-16
 43a:	00f90833          	add	a6,s2,a5
	for(int f = 0; f < int_points; f++) {
 43e:	0785                	addi	a5,a5,1
		tune = (dCO0140 * (int_points -f)) / int_points;
 440:	02b75533          	divu	a0,a4,a1
	for(int f = 0; f < int_points; f++) {
 444:	41870733          	sub	a4,a4,s8
		txctune_co[f] = tune | (tune << 4);
 448:	00451693          	slli	a3,a0,0x4
 44c:	8ef1                	and	a3,a3,a2
 44e:	8ec9                	or	a3,a3,a0
 450:	00d80023          	sb	a3,0(a6)
	for(int f = 0; f < int_points; f++) {
 454:	feb793e3          	bne	a5,a1,43a <main+0x1d0>
		txctune_co[f] = tune | (tune << 4);
 458:	6605                	lui	a2,0x1
	for(int f = 0; f < int_points; f++) {
 45a:	4681                	li	a3,0
		tune = (dCO4080 * (f -int_points)) / int_points;
 45c:	48d1                	li	a7,20
		txctune_co[f] = tune | (tune << 4);
 45e:	1641                	addi	a2,a2,-16
	for(int f = int_points; f < sizeof(RF->TXCTUNE_CO); f++) {
 460:	02800513          	li	a0,40
		tune = (dCO4080 * (f -int_points)) / int_points;
 464:	0316d5b3          	divu	a1,a3,a7
		txctune_co[f] = tune | (tune << 4);
 468:	00f90833          	add	a6,s2,a5
	for(int f = int_points; f < sizeof(RF->TXCTUNE_CO); f++) {
 46c:	0785                	addi	a5,a5,1
 46e:	96d2                	add	a3,a3,s4
		txctune_co[f] = tune | (tune << 4);
 470:	00459713          	slli	a4,a1,0x4
 474:	8f71                	and	a4,a4,a2
 476:	8f4d                	or	a4,a4,a1
 478:	00e80023          	sb	a4,0(a6)
	for(int f = int_points; f < sizeof(RF->TXCTUNE_CO); f++) {
 47c:	fea794e3          	bne	a5,a0,464 <main+0x1fa>
 480:	86ca                	mv	a3,s2
	for(int i = 0; i < sizeof(txctune_co) /4; i++) {
 482:	4701                	li	a4,0
		RF->TXCTUNE_CO[i] = ((uint32_t*)txctune_co)[i];
 484:	4000d537          	lui	a0,0x4000d
	for(int i = 0; i < sizeof(txctune_co) /4; i++) {
 488:	4629                	li	a2,10
		RF->TXCTUNE_CO[i] = ((uint32_t*)txctune_co)[i];
 48a:	428c                	lw	a1,0(a3)
 48c:	02870793          	addi	a5,a4,40 # 700028 <tx_button.c.519d54de+0x6fe230>
 490:	078a                	slli	a5,a5,0x2
 492:	97aa                	add	a5,a5,a0
 494:	c38c                	sw	a1,0(a5)
	for(int i = 0; i < sizeof(txctune_co) /4; i++) {
 496:	0705                	addi	a4,a4,1
 498:	0691                	addi	a3,a3,4
 49a:	fec718e3          	bne	a4,a2,48a <main+0x220>
	uint32_t dGA0140 = nGA2401 - nGA2440;
 49e:	413b0733          	sub	a4,s6,s3
	uint32_t dGA4080 = nGA2440 - nGA2480;
 4a2:	4695                	li	a3,5
 4a4:	02d706b3          	mul	a3,a4,a3
		txctune_ga[f] = tune | (tune << 4);
 4a8:	6585                	lui	a1,0x1
	uint32_t dGA4080 = nGA2440 - nGA2480;
 4aa:	417989b3          	sub	s3,s3,s7
	uint8_t txctune_ga[sizeof(RF->TXCTUNE_GA)] = {0};
 4ae:	f8042623          	sw	zero,-116(s0)
 4b2:	f8042823          	sw	zero,-112(s0)
 4b6:	f8042a23          	sw	zero,-108(s0)
	for(int f = 1; f < int_points; f++) {
 4ba:	4785                	li	a5,1
		tune = (dGA0140 * (int_points -f)) / int_points;
 4bc:	4519                	li	a0,6
		txctune_ga[f] = tune | (tune << 4);
 4be:	15c1                	addi	a1,a1,-16
 4c0:	f8c40613          	addi	a2,s0,-116
		tune = (dGA0140 * (int_points -f)) / int_points;
 4c4:	02a6d833          	divu	a6,a3,a0
		txctune_ga[f] = tune | (tune << 4);
 4c8:	00f608b3          	add	a7,a2,a5
	for(int f = 1; f < int_points; f++) {
 4cc:	0785                	addi	a5,a5,1
 4ce:	8e99                	sub	a3,a3,a4
		txctune_ga[f] = tune | (tune << 4);
 4d0:	00481613          	slli	a2,a6,0x4
 4d4:	8e6d                	and	a2,a2,a1
 4d6:	01066633          	or	a2,a2,a6
 4da:	00c88023          	sb	a2,0(a7)
	for(int f = 1; f < int_points; f++) {
 4de:	fea791e3          	bne	a5,a0,4c0 <main+0x256>
		txctune_ga[f] = tune | (tune << 4);
 4e2:	6605                	lui	a2,0x1
	for(int f = 1; f < int_points; f++) {
 4e4:	4701                	li	a4,0
		tune = (dGA4080 * (f -int_points)) / int_points;
 4e6:	4319                	li	t1,6
		txctune_ga[f] = tune | (tune << 4);
 4e8:	ff060893          	addi	a7,a2,-16 # ff0 <_data_lma+0x780>
	for(int f = int_points; f < sizeof(RF->TXCTUNE_GA) -1; f++) {
 4ec:	452d                	li	a0,11
		tune = (dGA4080 * (f -int_points)) / int_points;
 4ee:	026755b3          	divu	a1,a4,t1
		txctune_ga[f] = tune | (tune << 4);
 4f2:	f8c40693          	addi	a3,s0,-116
 4f6:	00f68833          	add	a6,a3,a5
	for(int f = int_points; f < sizeof(RF->TXCTUNE_GA) -1; f++) {
 4fa:	0785                	addi	a5,a5,1
 4fc:	974e                	add	a4,a4,s3
		txctune_ga[f] = tune | (tune << 4);
 4fe:	00459693          	slli	a3,a1,0x4
 502:	0116f6b3          	and	a3,a3,a7
 506:	8ecd                	or	a3,a3,a1
 508:	00d80023          	sb	a3,0(a6)
	for(int f = int_points; f < sizeof(RF->TXCTUNE_GA) -1; f++) {
 50c:	fea791e3          	bne	a5,a0,4ee <main+0x284>
		RF->TXCTUNE_GA[i] = ((uint32_t*)txctune_ga)[i];
 510:	f8c42683          	lw	a3,-116(s0)
 514:	4000d7b7          	lui	a5,0x4000d
 518:	08078713          	addi	a4,a5,128 # 4000d080 <_eusrstack+0x2000a080>
 51c:	c734                	sw	a3,72(a4)
 51e:	f9042683          	lw	a3,-112(s0)
	RF->TXTUNE_CTRL = (RF->TXTUNE_CTRL & 0x80ffffff) | (tune2440 & 0x7f000000);
 522:	7f000537          	lui	a0,0x7f000
 526:	8ce9                	and	s1,s1,a0
		RF->TXCTUNE_GA[i] = ((uint32_t*)txctune_ga)[i];
 528:	c774                	sw	a3,76(a4)
 52a:	f9442683          	lw	a3,-108(s0)
 52e:	cb34                	sw	a3,80(a4)
	RF->RF1 &= 0xffffffef;
 530:	43d8                	lw	a4,4(a5)
	RF->TXTUNE_CTRL = (RF->TXTUNE_CTRL & 0x80ffffff) | (tune2440 & 0x7f000000);
 532:	810006b7          	lui	a3,0x81000
 536:	16fd                	addi	a3,a3,-1
	RF->RF1 &= 0xffffffef;
 538:	9b3d                	andi	a4,a4,-17
 53a:	c3d8                	sw	a4,4(a5)
	RF->RF1 &= 0xfffffffe;
 53c:	43d8                	lw	a4,4(a5)
 53e:	9b79                	andi	a4,a4,-2
 540:	c3d8                	sw	a4,4(a5)
	RF->RF10 |= 0x1000;
 542:	5798                	lw	a4,40(a5)
 544:	8f51                	or	a4,a4,a2
 546:	d798                	sw	a4,40(a5)
	RF->RF11 |= 0x10;
 548:	57d8                	lw	a4,44(a5)
 54a:	01076713          	ori	a4,a4,16
 54e:	d7d8                	sw	a4,44(a5)
	RF->TXTUNE_CTRL = (RF->TXTUNE_CTRL & 0xffffffc0) | (tune2440 & 0x3f);
 550:	5f98                	lw	a4,56(a5)
 552:	fc077713          	andi	a4,a4,-64
 556:	01576733          	or	a4,a4,s5
 55a:	df98                	sw	a4,56(a5)
	RF->TXTUNE_CTRL = (RF->TXTUNE_CTRL & 0x80ffffff) | (tune2440 & 0x7f000000);
 55c:	5f98                	lw	a4,56(a5)
 55e:	8f75                	and	a4,a4,a3
 560:	8cd9                	or	s1,s1,a4
 562:	df84                	sw	s1,56(a5)
	RF->RF1 |= 0x100;
 564:	43d8                	lw	a4,4(a5)
	RF->RF20 &= 0xfffeffff;
 566:	76c1                	lui	a3,0xffff0
 568:	16fd                	addi	a3,a3,-1
	RF->RF1 |= 0x100;
 56a:	10076713          	ori	a4,a4,256
 56e:	c3d8                	sw	a4,4(a5)
	RF->RF20 &= 0xfffeffff;
 570:	4bb8                	lw	a4,80(a5)
 572:	8f75                	and	a4,a4,a3
 574:	cbb8                	sw	a4,80(a5)
	RF->RF2 |= 0x200000;
 576:	4798                	lw	a4,8(a5)
 578:	002006b7          	lui	a3,0x200
 57c:	8f55                	or	a4,a4,a3
 57e:	c798                	sw	a4,8(a5)
	RF->RF3 = (RF->RF3 & 0xffffffef) | 0x10;
 580:	47d8                	lw	a4,12(a5)
	while(LL->TMR && ((RF->RXTUNE >> 8) & 1));
 582:	4000c6b7          	lui	a3,0x4000c
	RF->RF3 = (RF->RF3 & 0xffffffef) | 0x10;
 586:	01076713          	ori	a4,a4,16
 58a:	c7d8                	sw	a4,12(a5)
	RF->RF1 |= 0x1000;
 58c:	43d8                	lw	a4,4(a5)
 58e:	8f51                	or	a4,a4,a2
 590:	c3d8                	sw	a4,4(a5)
	LL->TMR = 100;
 592:	4000c7b7          	lui	a5,0x4000c
 596:	06400713          	li	a4,100
 59a:	20078793          	addi	a5,a5,512 # 4000c200 <_eusrstack+0x20009200>
 59e:	d3f8                	sw	a4,100(a5)
	while(LL->TMR && ((RF->RXTUNE >> 8) & 1));
 5a0:	4000d737          	lui	a4,0x4000d
 5a4:	20068793          	addi	a5,a3,512 # 4000c200 <_eusrstack+0x20009200>
 5a8:	53fc                	lw	a5,100(a5)
 5aa:	c791                	beqz	a5,5b6 <main+0x34c>
 5ac:	09c72783          	lw	a5,156(a4) # 4000d09c <_eusrstack+0x2000a09c>
 5b0:	1007f793          	andi	a5,a5,256
 5b4:	fbe5                	bnez	a5,5a4 <main+0x33a>
	tuneFilter = RF->RXTUNE & 0x1f;
 5b6:	4000d7b7          	lui	a5,0x4000d
 5ba:	08078713          	addi	a4,a5,128 # 4000d080 <_eusrstack+0x2000a080>
 5be:	4f54                	lw	a3,28(a4)
 5c0:	c0818713          	addi	a4,gp,-1016 # 20000004 <tuneFilter>
 5c4:	8afd                	andi	a3,a3,31
 5c6:	c314                	sw	a3,0(a4)
	RF->RF20 |= 0x10000;
 5c8:	4bb4                	lw	a3,80(a5)
 5ca:	6641                	lui	a2,0x10
 5cc:	8ed1                	or	a3,a3,a2
 5ce:	cbb4                	sw	a3,80(a5)
	RF->RF20 = (RF->RF20 & 0xffffffe0) | tuneFilter;
 5d0:	4bb4                	lw	a3,80(a5)
 5d2:	4310                	lw	a2,0(a4)
 5d4:	9a81                	andi	a3,a3,-32
 5d6:	8ed1                	or	a3,a3,a2
 5d8:	cbb4                	sw	a3,80(a5)
	RF->RF2 &= 0xffdfffff;
 5da:	4794                	lw	a3,8(a5)
 5dc:	ffe00637          	lui	a2,0xffe00
 5e0:	167d                	addi	a2,a2,-1
 5e2:	8ef1                	and	a3,a3,a2
 5e4:	c794                	sw	a3,8(a5)
	tuneFilter2M = (tuneFilter +2 < 0x1f) ? (tuneFilter +2) : 0x1f;
 5e6:	4314                	lw	a3,0(a4)
 5e8:	4679                	li	a2,30
 5ea:	47fd                	li	a5,31
 5ec:	0689                	addi	a3,a3,2
 5ee:	00d66463          	bltu	a2,a3,5f6 <main+0x38c>
 5f2:	431c                	lw	a5,0(a4)
 5f4:	0789                	addi	a5,a5,2
 5f6:	c0f1a623          	sw	a5,-1012(gp) # 20000008 <tuneFilter2M>
	RF->RF22 &= 0xfffeffff;
 5fa:	4000d7b7          	lui	a5,0x4000d
 5fe:	4fb8                	lw	a4,88(a5)
 600:	76c1                	lui	a3,0xffff0
 602:	16fd                	addi	a3,a3,-1
 604:	8f75                	and	a4,a4,a3
 606:	cfb8                	sw	a4,88(a5)
	RF->RF2 |= 0x10000;
 608:	4798                	lw	a4,8(a5)
 60a:	66c1                	lui	a3,0x10
	RFEND_TXTune();
	RFEND_RXTune();
	DevSetMode(0);
 60c:	4501                	li	a0,0
	RF->RF2 |= 0x10000;
 60e:	8f55                	or	a4,a4,a3
 610:	c798                	sw	a4,8(a5)
	RF->RF3 = (RF->RF3 & 0xfffffeff) | 0x100;
 612:	47d8                	lw	a4,12(a5)
	RF->RF1 = (RF->RF1 & 0xfffeffff) | 0x100000;
 614:	ffef06b7          	lui	a3,0xffef0
 618:	16fd                	addi	a3,a3,-1
	RF->RF3 = (RF->RF3 & 0xfffffeff) | 0x100;
 61a:	10076713          	ori	a4,a4,256
 61e:	c7d8                	sw	a4,12(a5)
	RF->RF1 = (RF->RF1 & 0xfffeffff) | 0x100000;
 620:	43d8                	lw	a4,4(a5)

	// Uncomment to disable whitening to debug RF.
	//BB->CTRL_CFG |= (1<<6);
	DevSetMode(DEVSETMODE_TX);

	BB->ACCESSADDRESS1 = 0x8E89BED6; // access address
 622:	8e89c9b7          	lui	s3,0x8e89c
	BB->CRCINIT1 = 0x555555; // crc init
 626:	00555a37          	lui	s4,0x555
	RF->RF1 = (RF->RF1 & 0xfffeffff) | 0x100000;
 62a:	8f75                	and	a4,a4,a3
 62c:	001006b7          	lui	a3,0x100
 630:	8f55                	or	a4,a4,a3
 632:	c3d8                	sw	a4,4(a5)
	DevSetMode(0);
 634:	3cb1                	jal	90 <DevSetMode>
	NVIC->IPRIOR[0x15] |= 0x80;
 636:	e000e737          	lui	a4,0xe000e
 63a:	41574783          	lbu	a5,1045(a4) # e000e415 <_eusrstack+0xc000b415>
#ifdef CH570_CH572
	BB->ACCESSADDRESS2 = 0x8E89BED6;
	BB->CRCINIT2 = 0x555555;
	BB->CRCPOLY1 = (BB->CRCPOLY1 & 0xff000000) | 0x80032d; // crc poly
 63e:	00800ab7          	lui	s5,0x800
	memcpy(&ADV_BUF[2], adv, len);

#if defined(CH571_CH573)
	DMA->TXBUF = (uint32_t)ADV_BUF;
#else
	LL->FRAME_BUF = (uint32_t)ADV_BUF;
 642:	6c85                	lui	s9,0x1
	NVIC->IPRIOR[0x15] |= 0x80;
 644:	f807e793          	ori	a5,a5,-128
 648:	0ff7f793          	andi	a5,a5,255
 64c:	40f70aa3          	sb	a5,1045(a4)
	NVIC->IENR[((uint32_t)(IRQn) >> 5)] = (1 << ((uint32_t)(IRQn) & 0x1F));
 650:	002007b7          	lui	a5,0x200
 654:	10f72023          	sw	a5,256(a4)
    
    // RF Init
    uint8_t txPower = LL_TX_POWER_0_DBM;
    RFCoreInit(txPower);
    
    uint8_t magic_packet[] = {0xCA, 0xFE, 0xBA, 0xBE}; // 4 bytes magic
 658:	bebb07b7          	lui	a5,0xbebb0
 65c:	eca78793          	addi	a5,a5,-310 # bebafeca <_eusrstack+0x9ebaceca>
	BB->CTRL_CFG = (phy_mode == PHY_2M) ? CTRL_CFG_PHY_2M:
										  CTRL_CFG_PHY_1M; // default 1M for now
#endif

#if defined(CH570_CH572)
	BB->BB9 = (BB->BB9 & 0xf9ffffff) | ((phy_mode == PHY_2M) ? 0 : 0x2000000);
 660:	fa000b37          	lui	s6,0xfa000
#if defined(CH571_CH573)
	BB->BB11 = (BB->BB11 & 0xfffffffc); // |2 for RX
#endif

	// This clears bit 17 (If set, seems to have no impact.)
	LL->LL4 &= 0xfffdffff;
 664:	7b81                	lui	s7,0xfffe0
	uint32_t targend = SysTick->CNTL + n;
 666:	00b72c37          	lui	s8,0xb72
 66a:	f8f42623          	sw	a5,-116(s0)
	BB->ACCESSADDRESS1 = 0x8E89BED6; // access address
 66e:	ed698993          	addi	s3,s3,-298 # 8e89bed6 <_eusrstack+0x6e898ed6>
	BB->CRCINIT1 = 0x555555; // crc init
 672:	555a0a13          	addi	s4,s4,1365 # 555555 <tx_button.c.519d54de+0x55375d>
	BB->CRCPOLY1 = (BB->CRCPOLY1 & 0xff000000) | 0x80032d; // crc poly
 676:	32da8a93          	addi	s5,s5,813 # 80032d <tx_button.c.519d54de+0x7fe535>
	BB->BB9 = (BB->BB9 & 0xf9ffffff) | ((phy_mode == PHY_2M) ? 0 : 0x2000000);
 67a:	1b7d                	addi	s6,s6,-1
	LL->LL4 &= 0xfffdffff;
 67c:	1bfd                	addi	s7,s7,-1

#if !defined(CH571_CH573)
	LL->STATUS = LL_STATUS_TX;
#endif
	LL->TMR = (uint32_t)(len *512); // needs optimisation, per phy mode
 67e:	800c8d13          	addi	s10,s9,-2048 # 800 <LLE_IRQHandler+0x44>
 682:	b00c0c13          	addi	s8,s8,-1280 # b71b00 <tx_button.c.519d54de+0xb6fd08>
    
    while(1) {
        // Check Button (Low = Pressed)
        if (funDigitalRead(BTN_PIN) == 0) {
 686:	40001737          	lui	a4,0x40001
 68a:	0a472783          	lw	a5,164(a4) # 400010a4 <_eusrstack+0x1fffe0a4>
 68e:	8bc1                	andi	a5,a5,16
 690:	ffed                	bnez	a5,68a <main+0x420>
	BB->CTRL_TX = (BB->CTRL_TX & 0xfffffffc) | 1;
 692:	4000c6b7          	lui	a3,0x4000c
 696:	10068493          	addi	s1,a3,256 # 4000c100 <_eusrstack+0x20009100>
 69a:	58dc                	lw	a5,52(s1)
	RF->RF11 &= 0xfffffffd;
 69c:	4000d737          	lui	a4,0x4000d
	DevSetMode(DEVSETMODE_TX);
 6a0:	25800513          	li	a0,600
	BB->CTRL_TX = (BB->CTRL_TX & 0xfffffffc) | 1;
 6a4:	9bf1                	andi	a5,a5,-4
 6a6:	0017e793          	ori	a5,a5,1
 6aa:	d8dc                	sw	a5,52(s1)
	RF->RF11 &= 0xfffffffd;
 6ac:	575c                	lw	a5,44(a4)
void Frame_TX(uint8_t adv[], size_t len, uint8_t channel, uint8_t phy_mode) {
 6ae:	8d8a                	mv	s11,sp
	RF->RF11 &= 0xfffffffd;
 6b0:	9bf5                	andi	a5,a5,-3
 6b2:	d75c                	sw	a5,44(a4)
	BB->CTRL_CFG = (BB->CTRL_CFG & 0xffffff80) | (channel & 0x7f);
 6b4:	1006a783          	lw	a5,256(a3)
 6b8:	f807f793          	andi	a5,a5,-128
 6bc:	0257e793          	ori	a5,a5,37
 6c0:	10f6a023          	sw	a5,256(a3)
	DevSetMode(DEVSETMODE_TX);
 6c4:	32f1                	jal	90 <DevSetMode>
	BB->ACCESSADDRESS1 = 0x8E89BED6; // access address
 6c6:	0134a623          	sw	s3,12(s1)
	BB->CRCINIT1 = 0x555555; // crc init
 6ca:	0144a223          	sw	s4,4(s1)
	BB->ACCESSADDRESS2 = 0x8E89BED6;
 6ce:	0734a023          	sw	s3,96(s1)
	BB->CRCINIT2 = 0x555555;
 6d2:	0544ac23          	sw	s4,88(s1)
	BB->CRCPOLY1 = (BB->CRCPOLY1 & 0xff000000) | 0x80032d; // crc poly
 6d6:	4498                	lw	a4,8(s1)
 6d8:	ff0006b7          	lui	a3,0xff000
	for( int timeout = 3000; !(RF->RF26 & 0x1000000) && timeout >= 0; timeout-- );
 6dc:	01000637          	lui	a2,0x1000
	BB->CRCPOLY1 = (BB->CRCPOLY1 & 0xff000000) | 0x80032d; // crc poly
 6e0:	8f75                	and	a4,a4,a3
 6e2:	01576733          	or	a4,a4,s5
 6e6:	c498                	sw	a4,8(s1)
	BB->CRCPOLY2 = (BB->CRCPOLY2 & 0xff000000) | 0x80032d;
 6e8:	4cfc                	lw	a5,92(s1)
 6ea:	8ff5                	and	a5,a5,a3
 6ec:	0157e7b3          	or	a5,a5,s5
 6f0:	ccfc                	sw	a5,92(s1)
	ADV_BUF[0] = 0x02; // PDU 0x00, 0x02, 0x06 seem to work, with only 0x02 showing up on the phone
 6f2:	40200793          	li	a5,1026
 6f6:	f8f41c23          	sh	a5,-104(s0)
	memcpy(&ADV_BUF[2], adv, len);
 6fa:	f8c45783          	lhu	a5,-116(s0)
	LL->FRAME_BUF = (uint32_t)ADV_BUF;
 6fe:	4000c6b7          	lui	a3,0x4000c
	memcpy(&ADV_BUF[2], adv, len);
 702:	f8f41d23          	sh	a5,-102(s0)
 706:	f8e45783          	lhu	a5,-114(s0)
 70a:	f8f41e23          	sh	a5,-100(s0)
	LL->FRAME_BUF = (uint32_t)ADV_BUF;
 70e:	20068793          	addi	a5,a3,512 # 4000c200 <_eusrstack+0x20009200>
 712:	0727ac23          	sw	s2,120(a5)
	for( int timeout = 3000; !(RF->RF26 & 0x1000000) && timeout >= 0; timeout-- );
 716:	4000d6b7          	lui	a3,0x4000d
	LL->FRAME_BUF = (uint32_t)ADV_BUF;
 71a:	bbac8793          	addi	a5,s9,-1094
	for( int timeout = 3000; !(RF->RF26 & 0x1000000) && timeout >= 0; timeout-- );
 71e:	56b8                	lw	a4,104(a3)
 720:	8f71                	and	a4,a4,a2
 722:	e319                	bnez	a4,728 <main+0x4be>
 724:	17fd                	addi	a5,a5,-1
 726:	ffe5                	bnez	a5,71e <main+0x4b4>
										  CTRL_CFG_PHY_1M; // default 1M for now
 728:	4000c637          	lui	a2,0x4000c
 72c:	10062783          	lw	a5,256(a2) # 4000c100 <_eusrstack+0x20009100>
 730:	10060713          	addi	a4,a2,256
	BB->BB9 = (BB->BB9 & 0xf9ffffff) | ((phy_mode == PHY_2M) ? 0 : 0x2000000);
 734:	020006b7          	lui	a3,0x2000
										  CTRL_CFG_PHY_1M; // default 1M for now
 738:	cff7f793          	andi	a5,a5,-769
	BB->CTRL_CFG = (phy_mode == PHY_2M) ? CTRL_CFG_PHY_2M:
 73c:	1007e793          	ori	a5,a5,256
 740:	10f62023          	sw	a5,256(a2)
	BB->BB9 = (BB->BB9 & 0xf9ffffff) | ((phy_mode == PHY_2M) ? 0 : 0x2000000);
 744:	535c                	lw	a5,36(a4)
 746:	0167f7b3          	and	a5,a5,s6
 74a:	8fd5                	or	a5,a5,a3
 74c:	d35c                	sw	a5,36(a4)
	LL->LL4 &= 0xfffdffff;
 74e:	20060793          	addi	a5,a2,512
 752:	4b94                	lw	a3,16(a5)
 754:	0176f6b3          	and	a3,a3,s7
 758:	cb94                	sw	a3,16(a5)
	LL->STATUS = LL_STATUS_TX;
 75a:	000206b7          	lui	a3,0x20
 75e:	c794                	sw	a3,8(a5)
	LL->TMR = (uint32_t)(len *512); // needs optimisation, per phy mode
 760:	07a7a223          	sw	s10,100(a5)

	BB->CTRL_CFG |= CTRL_CFG_START_TX;
 764:	10062783          	lw	a5,256(a2)
 768:	010006b7          	lui	a3,0x1000
 76c:	8fd5                	or	a5,a5,a3
 76e:	10f62023          	sw	a5,256(a2)
	BB->CTRL_TX &= 0xfffffffc;
 772:	5b5c                	lw	a5,52(a4)
 774:	9bf1                	andi	a5,a5,-4
 776:	db5c                	sw	a5,52(a4)

	LL->LL0 = 2; // Not sure what this does, but on RX it's 1
 778:	4789                	li	a5,2
 77a:	20f62023          	sw	a5,512(a2)

	while(LL->TMR); // wait for tx buffer to empty
 77e:	4000c7b7          	lui	a5,0x4000c
 782:	20078493          	addi	s1,a5,512 # 4000c200 <_eusrstack+0x20009200>
 786:	50fc                	lw	a5,100(s1)
 788:	fbfd                	bnez	a5,77e <main+0x514>
	DevSetMode(0);
 78a:	4501                	li	a0,0
 78c:	3211                	jal	90 <DevSetMode>
	if(LL->LL0 & 3) {
 78e:	409c                	lw	a5,0(s1)
 790:	8b8d                	andi	a5,a5,3
 792:	cb89                	beqz	a5,7a4 <main+0x53a>
		LL->CTRL_MOD &= CTRL_MOD_RFSTOP;
 794:	48bc                	lw	a5,80(s1)
 796:	8ff7f793          	andi	a5,a5,-1793
 79a:	c8bc                	sw	a5,80(s1)
		LL->LL0 |= 0x08;
 79c:	409c                	lw	a5,0(s1)
 79e:	0087e793          	ori	a5,a5,8
 7a2:	c09c                	sw	a5,0(s1)
 7a4:	e000f7b7          	lui	a5,0xe000f
 7a8:	4798                	lw	a4,8(a5)
 7aa:	816e                	mv	sp,s11
	while( ((int32_t)( SysTick->CNTL - targend )) < 0 );
 7ac:	e000f6b7          	lui	a3,0xe000f
	uint32_t targend = SysTick->CNTL + n;
 7b0:	9762                	add	a4,a4,s8
	while( ((int32_t)( SysTick->CNTL - targend )) < 0 );
 7b2:	469c                	lw	a5,8(a3)
 7b4:	8f99                	sub	a5,a5,a4
 7b6:	fe07cee3          	bltz	a5,7b2 <main+0x548>
 7ba:	b5f1                	j	686 <main+0x41c>

000007bc <LLE_IRQHandler>:
void LLE_IRQHandler() {
 7bc:	715d                	addi	sp,sp,-80
 7be:	dc26                	sw	s1,56(sp)
		LL->STATUS &= LL->INT_EN;
 7c0:	4000c4b7          	lui	s1,0x4000c
void LLE_IRQHandler() {
 7c4:	de22                	sw	s0,60(sp)
		LL->STATUS &= LL->INT_EN;
 7c6:	20048413          	addi	s0,s1,512 # 4000c200 <_eusrstack+0x20009200>
void LLE_IRQHandler() {
 7ca:	d23a                	sw	a4,36(sp)
 7cc:	d03e                	sw	a5,32(sp)
		LL->STATUS &= LL->INT_EN;
 7ce:	4458                	lw	a4,12(s0)
 7d0:	441c                	lw	a5,8(s0)
void LLE_IRQHandler() {
 7d2:	da2a                	sw	a0,52(sp)
 7d4:	c686                	sw	ra,76(sp)
 7d6:	c496                	sw	t0,72(sp)
 7d8:	c29a                	sw	t1,68(sp)
 7da:	c09e                	sw	t2,64(sp)
 7dc:	d82e                	sw	a1,48(sp)
 7de:	d632                	sw	a2,44(sp)
 7e0:	d436                	sw	a3,40(sp)
 7e2:	ce42                	sw	a6,28(sp)
 7e4:	cc46                	sw	a7,24(sp)
 7e6:	ca72                	sw	t3,20(sp)
 7e8:	c876                	sw	t4,16(sp)
 7ea:	c67a                	sw	t5,12(sp)
 7ec:	c47e                	sw	t6,8(sp)
		LL->STATUS &= LL->INT_EN;
 7ee:	8ff9                	and	a5,a5,a4
 7f0:	c41c                	sw	a5,8(s0)
		BB->CTRL_TX = (BB->CTRL_TX & 0xfffffffc) | 1;
 7f2:	10048713          	addi	a4,s1,256
 7f6:	5b5c                	lw	a5,52(a4)
	DevSetMode(0);
 7f8:	4501                	li	a0,0
		BB->CTRL_TX = (BB->CTRL_TX & 0xfffffffc) | 1;
 7fa:	9bf1                	andi	a5,a5,-4
 7fc:	0017e793          	ori	a5,a5,1
 800:	db5c                	sw	a5,52(a4)
	DevSetMode(0);
 802:	3079                	jal	90 <DevSetMode>
	LL->CTRL_MOD &= CTRL_MOD_RFSTOP;
 804:	483c                	lw	a5,80(s0)
	rx_ready = 1;
 806:	4705                	li	a4,1
}
 808:	40b6                	lw	ra,76(sp)
	LL->CTRL_MOD &= CTRL_MOD_RFSTOP;
 80a:	8ff7f793          	andi	a5,a5,-1793
 80e:	c83c                	sw	a5,80(s0)
	LL->LL0 |= 0x08;
 810:	2004a783          	lw	a5,512(s1)
}
 814:	5472                	lw	s0,60(sp)
 816:	42a6                	lw	t0,72(sp)
	LL->LL0 |= 0x08;
 818:	0087e793          	ori	a5,a5,8
 81c:	20f4a023          	sw	a5,512(s1)
	rx_ready = 1;
 820:	c0e1a223          	sw	a4,-1020(gp) # 20000000 <rx_ready>
}
 824:	4316                	lw	t1,68(sp)
 826:	4386                	lw	t2,64(sp)
 828:	54e2                	lw	s1,56(sp)
 82a:	5552                	lw	a0,52(sp)
 82c:	55c2                	lw	a1,48(sp)
 82e:	5632                	lw	a2,44(sp)
 830:	56a2                	lw	a3,40(sp)
 832:	5712                	lw	a4,36(sp)
 834:	5782                	lw	a5,32(sp)
 836:	4872                	lw	a6,28(sp)
 838:	48e2                	lw	a7,24(sp)
 83a:	4e52                	lw	t3,20(sp)
 83c:	4ec2                	lw	t4,16(sp)
 83e:	4f32                	lw	t5,12(sp)
 840:	4fa2                	lw	t6,8(sp)
 842:	6161                	addi	sp,sp,80
 844:	30200073          	mret

00000848 <channel_map>:
 848:	04030201 08070605 0d0c0a09 11100f0e     ................
 858:	15141312 19181716 1d1c1b1a 21201f1e     .............. !
 868:	25242322 270b0026                       "#$%&..'
